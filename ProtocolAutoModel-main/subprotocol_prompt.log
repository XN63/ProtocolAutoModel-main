2025-09-18 18:13:15,352 - INFO - subprotocolextractor.py:49 - 日志初始化：subprotocol_prompt.log
2025-09-18 18:13:15,396 - INFO - subprotocolextractor.py:367 - 启动时间：2025-09-18 18:13:15 CST
2025-09-18 18:13:16,266 - INFO - subprotocolextractor.py:389 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-18 19:00:43,968 - INFO - subprotocolextractor.py:49 - 日志初始化：subprotocol_prompt.log
2025-09-18 19:00:44,011 - INFO - subprotocolextractor.py:367 - 启动时间：2025-09-18 19:00:44 CST
2025-09-18 19:00:44,886 - INFO - subprotocolextractor.py:389 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-18 19:21:44,339 - INFO - subprotocolextractor.py:49 - 日志初始化：subprotocol_prompt.log
2025-09-18 19:21:44,426 - INFO - subprotocolextractor.py:367 - 启动时间：2025-09-18 19:21:44 CST
2025-09-18 19:21:45,352 - INFO - subprotocolextractor.py:389 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-18 19:21:52,001 - INFO - subprotocolextractor.py:406 - 模板基线 tokens ≈ 715
2025-09-18 19:21:52,031 - INFO - subprotocolextractor.py:410 - 分片数：1
2025-09-18 19:21:52,040 - WARNING - subprotocolextractor.py:424 - [Shard 1] 超预算，启动二次裁剪 evidence…
2025-09-18 19:21:52,083 - INFO - subprotocolextractor.py:441 - [Shard 1] 发送 tokens≈6444
2025-09-18 19:22:02,303 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 19:22:02,364 - INFO - subprotocolextractor.py:449 - [Shard 1] 收到结果 2192 chars
2025-09-18 19:22:02,365 - INFO - subprotocolextractor.py:459 - 仅有一片草案，无需合并。已保存：D:\ProtocolAutoModel-main\output\agents\QUIC_subprotocols_gpt-4o_developpromptchange.json
2025-09-19 20:04:03,911 - INFO - subprotocolextractor.py:49 - 日志初始化：subprotocol_prompt.log
2025-09-19 20:04:03,997 - INFO - subprotocolextractor.py:367 - 启动时间：2025-09-19 20:04:03 CST
2025-09-19 20:04:04,977 - INFO - subprotocolextractor.py:389 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-19 20:04:05,478 - INFO - subprotocolextractor.py:406 - 模板基线 tokens ≈ 715
2025-09-19 20:04:05,510 - INFO - subprotocolextractor.py:410 - 分片数：1
2025-09-19 20:04:05,519 - WARNING - subprotocolextractor.py:424 - [Shard 1] 超预算，启动二次裁剪 evidence…
2025-09-19 20:04:05,563 - INFO - subprotocolextractor.py:441 - [Shard 1] 发送 tokens≈6444
2025-09-19 20:05:55,282 - INFO - _base_client.py:1071 - Retrying request to /chat/completions in 0.468342 seconds
2025-09-19 20:06:57,752 - INFO - _base_client.py:1071 - Retrying request to /chat/completions in 0.902752 seconds
2025-09-19 20:07:46,413 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-19 20:07:46,493 - INFO - subprotocolextractor.py:449 - [Shard 1] 收到结果 3304 chars
2025-09-19 20:19:41,005 - INFO - subprotocolextractor.py:49 - 日志初始化：subprotocol_prompt.log
2025-09-19 20:19:41,090 - INFO - subprotocolextractor.py:367 - 启动时间：2025-09-19 20:19:41 CST
2025-09-19 20:19:42,008 - INFO - subprotocolextractor.py:389 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-19 20:19:42,465 - INFO - subprotocolextractor.py:406 - 模板基线 tokens ≈ 715
2025-09-19 20:19:42,496 - INFO - subprotocolextractor.py:410 - 分片数：1
2025-09-19 20:19:42,505 - WARNING - subprotocolextractor.py:424 - [Shard 1] 超预算，启动二次裁剪 evidence…
2025-09-19 20:19:42,548 - INFO - subprotocolextractor.py:441 - [Shard 1] 发送 tokens≈6444
2025-09-19 20:19:56,473 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-19 20:19:56,556 - INFO - subprotocolextractor.py:449 - [Shard 1] 收到结果 2303 chars
2025-09-19 20:19:56,557 - INFO - subprotocolextractor.py:459 - 仅有一片草案，无需合并。已保存：D:\ProtocolAutoModel-main\output\agents\QUIC_subprotocols_gpt-4o_developpromptchange.json
2025-09-25 14:42:49,788 - INFO - subprotocolextractor_eid.py:57 - 日志初始化：subprotocol_prompt.log
2025-09-25 14:42:49,976 - INFO - subprotocolextractor_eid.py:485 - 启动时间：2025-09-25 14:42:49 CST
2025-09-25 14:42:51,044 - INFO - subprotocolextractor_eid.py:507 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-25 14:42:51,603 - INFO - subprotocolextractor_eid.py:524 - 模板基线 tokens ≈ 711
2025-09-25 14:42:51,649 - INFO - subprotocolextractor_eid.py:528 - 分片数：3
2025-09-25 14:42:51,656 - INFO - subprotocolextractor_eid.py:558 - [Shard 1] 发送 tokens≈6941
2025-09-25 14:42:51,657 - INFO - subprotocolextractor_eid.py:561 - ====prompt====
2025-09-25 14:42:51,657 - INFO - subprotocolextractor_eid.py:562 - System Prompt:
你是“协议规范编译器”。任务：仅依据提供的 RFC 证据（含章节号与锚点），
把 QUIC (RFC 9000) 的主要子协议划分出来，并给出用途、关键帧、依赖与边界。
铁规：
1) 仅使用输入 evidence；禁止外部知识或猜测。
2) 每条结论必须给 cites（引用 eid，来自 cites_pool）。
3) 允许内部推理，但最终只输出 JSON；不得输出推理过程。
4) 术语统一：client≈initiator，server≈responder，endpoint≈peer；帧名保持全大写。
5) 模态优先级：MUST/SHALL > SHOULD/RECOMMENDED > MAY/OPTIONAL；冲突时偏向强模态。
6) 证据不足时，输出 open_questions[] 指明缺口与应补小节/帧。
7) 严格符合 JSON Schema，勿添加未定义字段。
2025-09-25 14:42:51,657 - INFO - subprotocolextractor_eid.py:563 - ----
2025-09-25 14:42:51,657 - INFO - subprotocolextractor_eid.py:564 - Developer Prompt:
【工作流】
A. 候选模块：从 toc + evidence 导言/目的/规范句中归纳主要子协议（Streams、Flow Control、Connection Management/Migration、Connection-level 传输、Connection Closure 等，前提是有证据）。
B. purpose：用导言/目的句凝练（≤200字符），附 1–3 条 cites。
C. 边界与依赖：boundaries.includes（小节号集合）、excludes（明确不含主题，如 RFC9001/9002）；depends_on（如 Streams 依赖 Flow Control）。
D. key_frames：把与该模块相关的帧名（仅名称）列出；证据可来自 §19.* 的帧定义或正文提及。
E. 覆盖检查：若 frame_evidence 里有帧未被任何模块收录，加入 open_questions。
F. cites 必须是**字符串数组**，且只能取自 cites_pool.eid。禁止使用 section/anchor 文本；禁止自造 eid。
【输出 JSON Schema】
{
  "type":"object",
  "required":["subprotocols","open_questions"],
  "properties":{
    "subprotocols":{"type":"array","items":{
      "type":"object",
      "required":["name","purpose","key_frames","depends_on","boundaries","cites"],
      "properties":{
        "name":{"type":"string"},
        "purpose":{"type":"string","maxLength":200},
        "key_frames":{"type":"array","items":{"type":"string"}},
        "depends_on":{"type":"array","items":{"type":"string"}},
        "boundaries":{"type":"object","properties":{
          "includes":{"type":"array","items":{"type":"string"}},
          "excludes":{"type":"array","items":{"type":"string"}}
        }},
        "cites":{"type":"array","items":{"type":"string"}}
      }
    }},
    "open_questions":{"type":"array","items":{
      "type":"object",
      "required":["ask"],
      "properties":{
        "ask":{"type":"string"},
        "related_frames":{"type":"array","items":{"type":"string"}},
        "wanted_sections":{"type":"array","items":{"type":"string"}}
      }
    }}
  }
}
2025-09-25 14:42:51,658 - INFO - subprotocolextractor_eid.py:565 - ----
2025-09-25 14:42:51,658 - INFO - subprotocolextractor_eid.py:566 - User Prompt:
任务：在 RFC 证据范围内，抽取‘主要子协议/主要部分’用于后续选择建模范围。
只输出符合上方 JSON Schema 的 JSON。每条字段都要给 cites，且 cites 只能是 cites_pool 中的 eid（字符串）。

=== ContextPacket (subprotocols) ===
{
  "toc": [
    {
      "section": "2",
      "title": "Streams",
      "anchor": "#name-streams",
      "order": 5
    },
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "order": 136
    },
    {
      "section": "20",
      "title": "Error Codes",
      "anchor": "#name-error-codes",
      "order": 160
    }
  ],
  "evidence": [
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "evidence": [
        {
          "type": "normative",
          "text": "STREAM Frame Format",
          "source": {
            "section": "19.8",
            "anchor": "#name-stream-frames",
            "para": "19.8-p1232",
            "sent_id": "19.8-p5695-s2",
            "eid": "720f215781e79bdc"
          }
        },
        {
          "type": "normative",
          "text": "MAX_DATA Frame Format",
          "source": {
            "section": "19.9",
            "anchor": "#name-max_data-frames",
            "para": "19.9-p1246",
            "sent_id": "19.9-p5723-s2",
            "eid": "81baac9031ce4264"
          }
        },
        {
          "type": "purpose",
          "text": "19.1.",
          "source": {
            "section": "19",
            "anchor": "#name-frame-types-and-formats",
            "para": "19-p1109",
            "sent_id": "19-p5395-s1",
            "eid": "f408addcf636faa7"
          }
        },
        {
          "type": "purpose",
          "text": "19.2.",
          "source": {
            "section": "19.1",
            "anchor": "#name-padding-frames",
            "para": "19.1-p1116",
            "sent_id": "19.1-p5412-s1",
            "eid": "af4b7463b751bc3e"
          }
        },
        {
          "type": "purpose",
          "text": "19.3.",
          "source": {
            "section": "19.2",
            "anchor": "#name-ping-frames",
            "para": "19.2-p1125",
            "sent_id": "19.2-p5425-s1",
            "eid": "0a17e44f8aa704f5"
          }
        },
        {
          "type": "normative",
          "text": "ACK Ranges",
          "source": {
            "section": "19.3.1",
            "anchor": "#name-ack-ranges",
            "para": "19.3.1-p1145",
            "sent_id": "19.3.1-p5512-s2",
            "eid": "d01360fa5fb7194e"
          }
        },
        {
          "type": "purpose",
          "text": "19.4.",
          "source": {
            "section": "19.3.2",
            "anchor": "#name-ecn-counts",
            "para": "19.3.2-p1175",
            "sent_id": "19.3.2-p5557-s1",
            "eid": "c0710ea8039271cd"
          }
        },
        {
          "type": "purpose",
          "text": "19.5.",
          "source": {
            "section": "19.4",
            "anchor": "#name-reset_stream-frames",
            "para": "19.4-p1188",
            "sent_id": "19.4-p5579-s1",
            "eid": "247207e2d4d98538"
          }
        },
        {
          "type": "purpose",
          "text": "19.6.",
          "source": {
            "section": "19.5",
            "anchor": "#name-stop_sending-frames",
            "para": "19.5-p1199",
            "sent_id": "19.5-p5602-s1",
            "eid": "4c66d2e99129f7a7"
          }
        },
        {
          "type": "purpose",
          "text": "19.7.",
          "source": {
            "section": "19.6",
            "anchor": "#name-crypto-frames",
            "para": "19.6-p1213",
            "sent_id": "19.6-p5635-s1",
            "eid": "9dd2d98a33191cfa"
          }
        },
        {
          "type": "purpose",
          "text": "19.8.",
          "source": {
            "section": "19.7",
            "anchor": "#name-new_token-frames",
            "para": "19.7-p1225",
            "sent_id": "19.7-p5661-s1",
            "eid": "34729c7b174611d2"
          }
        },
        {
          "type": "purpose",
          "text": "19.9.",
          "source": {
            "section": "19.8",
            "anchor": "#name-stream-frames",
            "para": "19.8-p1243",
            "sent_id": "19.8-p5713-s1",
            "eid": "33c1677cbe79c05d"
          }
        },
        {
          "type": "purpose",
          "text": "19.10.",
          "source": {
            "section": "19.9",
            "anchor": "#name-max_data-frames",
            "para": "19.9-p1253",
            "sent_id": "19.9-p5734-s1",
            "eid": "592673a212421afc"
          }
        },
        {
          "type": "purpose",
          "text": "19.11.",
          "source": {
            "section": "19.10",
            "anchor": "#name-max_stream_data-frames",
            "para": "19.10-p1266",
            "sent_id": "19.10-p5765-s1",
            "eid": "5c86d707b66dfe32"
          }
        },
        {
          "type": "purpose",
          "text": "19.12.",
          "source": {
            "section": "19.11",
            "anchor": "#name-max_streams-frames",
            "para": "19.11-p1278",
            "sent_id": "19.11-p5798-s1",
            "eid": "375ccbdc717d73b2"
          }
        },
        {
          "type": "purpose",
          "text": "19.13.",
          "source": {
            "section": "19.12",
            "anchor": "#name-data_blocked-frames",
            "para": "19.12-p1287",
            "sent_id": "19.12-p5814-s1",
            "eid": "ff1fbcf3f9d7e6e9"
          }
        },
        {
          "type": "purpose",
          "text": "19.14.",
          "source": {
            "section": "19.13",
            "anchor": "#name-stream_data_blocked-frames",
            "para": "19.13-p1298",
            "sent_id": "19.13-p5833-s1",
            "eid": "276184cacaadc30c"
          }
        },
        {
          "type": "purpose",
          "text": "19.15.",
          "source": {
            "section": "19.14",
            "anchor": "#name-streams_blocked-frames",
            "para": "19.14-p1308",
            "sent_id": "19.14-p5854-s1",
            "eid": "02adb5fd8711e71f"
          }
        },
        {
          "type": "purpose",
          "text": "19.16.",
          "source": {
            "section": "19.15",
            "anchor": "#name-new_connection_id-frames",
            "para": "19.15-p1327",
            "sent_id": "19.15-p5898-s1",
            "eid": "9a08d9a5ba731949"
          }
        },
        {
          "type": "purpose",
          "text": "19.17.",
          "source": {
            "section": "19.16",
            "anchor": "#name-retire_connection_id-frames",
            "para": "19.16-p1340",
            "sent_id": "19.16-p5926-s1",
            "eid": "2bbfe46e3d7f2615"
          }
        }
      ]
    },
    {
      "section": "2",
      "title": "Streams",
      "anchor": "#name-streams",
      "evidence": [
        {
          "type": "purpose",
          "text": "2.1.",
          "source": {
            "section": "2",
            "anchor": "#name-streams",
            "para": "2-p80",
            "sent_id": "2-p191-s1",
            "eid": "2c351a2721df3672"
          }
        },
        {
          "type": "purpose",
          "text": "Table 1 :",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p86",
            "sent_id": "2.1-p212-s1",
            "eid": "db17a884fc78ebc4"
          }
        },
        {
          "type": "purpose",
          "text": "2.2.",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p89",
            "sent_id": "2.1-p218-s1",
            "eid": "209a0e402cab0ae6"
          }
        },
        {
          "type": "purpose",
          "text": "2.3.",
          "source": {
            "section": "2.2",
            "anchor": "#name-sending-and-receiving-data",
            "para": "2.2-p96",
            "sent_id": "2.2-p240-s1",
            "eid": "2a4711c9b6182f2b"
          }
        },
        {
          "type": "purpose",
          "text": "2.4.",
          "source": {
            "section": "2.3",
            "anchor": "#name-stream-prioritization",
            "para": "2.3-p100",
            "sent_id": "2.3-p249-s1",
            "eid": "a12cfaf7dc718b61"
          }
        },
        {
          "type": "purpose",
          "text": "3.",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p110",
            "sent_id": "2.4-p264-s1",
            "eid": "baf4be69c579030f"
          }
        },
        {
          "type": "purpose",
          "text": "read data; and ¶",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p107",
            "sent_id": "2.4-p261-s1",
            "eid": "6953fc437d625b46"
          }
        },
        {
          "type": "normative",
          "text": "An endpoint that receives a STOP_SENDING frame MUST send a RESET_STREAM frame if the stream is in the \"Ready\" or \"Send\" state.",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p110",
            "sent_id": "2.4-p328-s65",
            "eid": "1a698e4d5b5c58fd"
          }
        },
        {
          "type": "normative",
          "text": "A QUIC endpoint MUST NOT reuse a stream ID within a connection. ",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p82",
            "sent_id": "2.1-p207-s4",
            "eid": "0a3e79b7581d7156"
          }
        }
      ]
    },
    {
      "section": "20",
      "title": "Error Codes",
      "anchor": "#name-error-codes",
      "evidence": [
        {
          "type": "purpose",
          "text": "20.1.",
          "source": {
            "section": "20",
            "anchor": "#name-error-codes",
            "para": "20-p1389",
            "sent_id": "20-p6067-s1",
            "eid": "a7ea2fe72e57db06"
          }
        },
        {
          "type": "purpose",
          "text": "20.2.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1411",
            "sent_id": "20.1-p6124-s1",
            "eid": "d3edee5a4e1cb8e3"
          }
        },
        {
          "type": "purpose",
          "text": "21.",
          "source": {
            "section": "20.2",
            "anchor": "#name-application-protocol-error-",
            "para": "20.2-p1413",
            "sent_id": "20.2-p6129-s1",
            "eid": "72ea4e567307104f"
          }
        },
        {
          "type": "purpose",
          "text": "The cryptographic handshake failed.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1408",
            "sent_id": "20.1-p6115-s1",
            "eid": "f376d3877194e7f6"
          }
        },
        {
          "type": "purpose",
          "text": "The server refused to accept a new connection. ¶",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1393",
            "sent_id": "20.1-p6099-s1",
            "eid": "aef4108619995378"
          }
        },
        {
          "type": "purpose",
          "text": "See Section 22.5 for details on registering new error codes. ¶",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1409",
            "sent_id": "20.1-p6118-s1",
            "eid": "3c15ff58365d10fb"
          }
        },
        {
          "type": "purpose",
          "text": "In defining these error codes, several principles are applied.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1410",
            "sent_id": "20.1-p6119-s1",
            "eid": "9ea30f9be7ac24c6"
          }
        }
      ]
    }
  ],
  "frame_evidence": [
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "frames": [
        "DATA_BLOCKED",
        "MAX_DATA",
        "MAX_STREAMS",
        "MAX_STREAM_DATA",
        "RESET_STREAM",
        "STOP_SENDING",
        "STREAM",
        "STREAMS_BLOCKED",
        "STREAM_DATA_BLOCKED"
      ]
    }
  ],
  "cites_pool": [
    {
      "eid": "720f215781e79bdc",
      "section": "19.8",
      "anchor": "#name-stream-frames",
      "para": "19.8-p1232",
      "sent_id": "19.8-p5695-s2"
    },
    {
      "eid": "81baac9031ce4264",
      "section": "19.9",
      "anchor": "#name-max_data-frames",
      "para": "19.9-p1246",
      "sent_id": "19.9-p5723-s2"
    },
    {
      "eid": "f408addcf636faa7",
      "section": "19",
      "anchor": "#name-frame-types-and-formats",
      "para": "19-p1109",
      "sent_id": "19-p5395-s1"
    },
    {
      "eid": "af4b7463b751bc3e",
      "section": "19.1",
      "anchor": "#name-padding-frames",
      "para": "19.1-p1116",
      "sent_id": "19.1-p5412-s1"
    },
    {
      "eid": "0a17e44f8aa704f5",
      "section": "19.2",
      "anchor": "#name-ping-frames",
      "para": "19.2-p1125",
      "sent_id": "19.2-p5425-s1"
    },
    {
      "eid": "d01360fa5fb7194e",
      "section": "19.3.1",
      "anchor": "#name-ack-ranges",
      "para": "19.3.1-p1145",
      "sent_id": "19.3.1-p5512-s2"
    },
    {
      "eid": "c0710ea8039271cd",
      "section": "19.3.2",
      "anchor": "#name-ecn-counts",
      "para": "19.3.2-p1175",
      "sent_id": "19.3.2-p5557-s1"
    },
    {
      "eid": "247207e2d4d98538",
      "section": "19.4",
      "anchor": "#name-reset_stream-frames",
      "para": "19.4-p1188",
      "sent_id": "19.4-p5579-s1"
    },
    {
      "eid": "4c66d2e99129f7a7",
      "section": "19.5",
      "anchor": "#name-stop_sending-frames",
      "para": "19.5-p1199",
      "sent_id": "19.5-p5602-s1"
    },
    {
      "eid": "9dd2d98a33191cfa",
      "section": "19.6",
      "anchor": "#name-crypto-frames",
      "para": "19.6-p1213",
      "sent_id": "19.6-p5635-s1"
    },
    {
      "eid": "34729c7b174611d2",
      "section": "19.7",
      "anchor": "#name-new_token-frames",
      "para": "19.7-p1225",
      "sent_id": "19.7-p5661-s1"
    },
    {
      "eid": "33c1677cbe79c05d",
      "section": "19.8",
      "anchor": "#name-stream-frames",
      "para": "19.8-p1243",
      "sent_id": "19.8-p5713-s1"
    },
    {
      "eid": "592673a212421afc",
      "section": "19.9",
      "anchor": "#name-max_data-frames",
      "para": "19.9-p1253",
      "sent_id": "19.9-p5734-s1"
    },
    {
      "eid": "5c86d707b66dfe32",
      "section": "19.10",
      "anchor": "#name-max_stream_data-frames",
      "para": "19.10-p1266",
      "sent_id": "19.10-p5765-s1"
    },
    {
      "eid": "375ccbdc717d73b2",
      "section": "19.11",
      "anchor": "#name-max_streams-frames",
      "para": "19.11-p1278",
      "sent_id": "19.11-p5798-s1"
    },
    {
      "eid": "ff1fbcf3f9d7e6e9",
      "section": "19.12",
      "anchor": "#name-data_blocked-frames",
      "para": "19.12-p1287",
      "sent_id": "19.12-p5814-s1"
    },
    {
      "eid": "276184cacaadc30c",
      "section": "19.13",
      "anchor": "#name-stream_data_blocked-frames",
      "para": "19.13-p1298",
      "sent_id": "19.13-p5833-s1"
    },
    {
      "eid": "02adb5fd8711e71f",
      "section": "19.14",
      "anchor": "#name-streams_blocked-frames",
      "para": "19.14-p1308",
      "sent_id": "19.14-p5854-s1"
    },
    {
      "eid": "9a08d9a5ba731949",
      "section": "19.15",
      "anchor": "#name-new_connection_id-frames",
      "para": "19.15-p1327",
      "sent_id": "19.15-p5898-s1"
    },
    {
      "eid": "2bbfe46e3d7f2615",
      "section": "19.16",
      "anchor": "#name-retire_connection_id-frames",
      "para": "19.16-p1340",
      "sent_id": "19.16-p5926-s1"
    },
    {
      "eid": "2c351a2721df3672",
      "section": "2",
      "anchor": "#name-streams",
      "para": "2-p80",
      "sent_id": "2-p191-s1"
    },
    {
      "eid": "db17a884fc78ebc4",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p86",
      "sent_id": "2.1-p212-s1"
    },
    {
      "eid": "209a0e402cab0ae6",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p89",
      "sent_id": "2.1-p218-s1"
    },
    {
      "eid": "2a4711c9b6182f2b",
      "section": "2.2",
      "anchor": "#name-sending-and-receiving-data",
      "para": "2.2-p96",
      "sent_id": "2.2-p240-s1"
    },
    {
      "eid": "a12cfaf7dc718b61",
      "section": "2.3",
      "anchor": "#name-stream-prioritization",
      "para": "2.3-p100",
      "sent_id": "2.3-p249-s1"
    },
    {
      "eid": "baf4be69c579030f",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p110",
      "sent_id": "2.4-p264-s1"
    },
    {
      "eid": "6953fc437d625b46",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p107",
      "sent_id": "2.4-p261-s1"
    },
    {
      "eid": "1a698e4d5b5c58fd",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p110",
      "sent_id": "2.4-p328-s65"
    },
    {
      "eid": "0a3e79b7581d7156",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p82",
      "sent_id": "2.1-p207-s4"
    },
    {
      "eid": "a7ea2fe72e57db06",
      "section": "20",
      "anchor": "#name-error-codes",
      "para": "20-p1389",
      "sent_id": "20-p6067-s1"
    },
    {
      "eid": "d3edee5a4e1cb8e3",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1411",
      "sent_id": "20.1-p6124-s1"
    },
    {
      "eid": "72ea4e567307104f",
      "section": "20.2",
      "anchor": "#name-application-protocol-error-",
      "para": "20.2-p1413",
      "sent_id": "20.2-p6129-s1"
    },
    {
      "eid": "f376d3877194e7f6",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1408",
      "sent_id": "20.1-p6115-s1"
    },
    {
      "eid": "aef4108619995378",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1393",
      "sent_id": "20.1-p6099-s1"
    },
    {
      "eid": "3c15ff58365d10fb",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1409",
      "sent_id": "20.1-p6118-s1"
    },
    {
      "eid": "9ea30f9be7ac24c6",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1410",
      "sent_id": "20.1-p6119-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}

2025-09-25 14:42:51,661 - INFO - subprotocolextractor_eid.py:567 - ----
2025-09-25 14:42:51,661 - INFO - subprotocolextractor_eid.py:568 - Packet Data:
{
  "toc": [
    {
      "section": "2",
      "title": "Streams",
      "anchor": "#name-streams",
      "order": 5
    },
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "order": 136
    },
    {
      "section": "20",
      "title": "Error Codes",
      "anchor": "#name-error-codes",
      "order": 160
    }
  ],
  "evidence": [
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "evidence": [
        {
          "type": "normative",
          "text": "STREAM Frame Format",
          "source": {
            "section": "19.8",
            "anchor": "#name-stream-frames",
            "para": "19.8-p1232",
            "sent_id": "19.8-p5695-s2",
            "eid": "720f215781e79bdc"
          }
        },
        {
          "type": "normative",
          "text": "MAX_DATA Frame Format",
          "source": {
            "section": "19.9",
            "anchor": "#name-max_data-frames",
            "para": "19.9-p1246",
            "sent_id": "19.9-p5723-s2",
            "eid": "81baac9031ce4264"
          }
        },
        {
          "type": "purpose",
          "text": "19.1.",
          "source": {
            "section": "19",
            "anchor": "#name-frame-types-and-formats",
            "para": "19-p1109",
            "sent_id": "19-p5395-s1",
            "eid": "f408addcf636faa7"
          }
        },
        {
          "type": "purpose",
          "text": "19.2.",
          "source": {
            "section": "19.1",
            "anchor": "#name-padding-frames",
            "para": "19.1-p1116",
            "sent_id": "19.1-p5412-s1",
            "eid": "af4b7463b751bc3e"
          }
        },
        {
          "type": "purpose",
          "text": "19.3.",
          "source": {
            "section": "19.2",
            "anchor": "#name-ping-frames",
            "para": "19.2-p1125",
            "sent_id": "19.2-p5425-s1",
            "eid": "0a17e44f8aa704f5"
          }
        },
        {
          "type": "normative",
          "text": "ACK Ranges",
          "source": {
            "section": "19.3.1",
            "anchor": "#name-ack-ranges",
            "para": "19.3.1-p1145",
            "sent_id": "19.3.1-p5512-s2",
            "eid": "d01360fa5fb7194e"
          }
        },
        {
          "type": "purpose",
          "text": "19.4.",
          "source": {
            "section": "19.3.2",
            "anchor": "#name-ecn-counts",
            "para": "19.3.2-p1175",
            "sent_id": "19.3.2-p5557-s1",
            "eid": "c0710ea8039271cd"
          }
        },
        {
          "type": "purpose",
          "text": "19.5.",
          "source": {
            "section": "19.4",
            "anchor": "#name-reset_stream-frames",
            "para": "19.4-p1188",
            "sent_id": "19.4-p5579-s1",
            "eid": "247207e2d4d98538"
          }
        },
        {
          "type": "purpose",
          "text": "19.6.",
          "source": {
            "section": "19.5",
            "anchor": "#name-stop_sending-frames",
            "para": "19.5-p1199",
            "sent_id": "19.5-p5602-s1",
            "eid": "4c66d2e99129f7a7"
          }
        },
        {
          "type": "purpose",
          "text": "19.7.",
          "source": {
            "section": "19.6",
            "anchor": "#name-crypto-frames",
            "para": "19.6-p1213",
            "sent_id": "19.6-p5635-s1",
            "eid": "9dd2d98a33191cfa"
          }
        },
        {
          "type": "purpose",
          "text": "19.8.",
          "source": {
            "section": "19.7",
            "anchor": "#name-new_token-frames",
            "para": "19.7-p1225",
            "sent_id": "19.7-p5661-s1",
            "eid": "34729c7b174611d2"
          }
        },
        {
          "type": "purpose",
          "text": "19.9.",
          "source": {
            "section": "19.8",
            "anchor": "#name-stream-frames",
            "para": "19.8-p1243",
            "sent_id": "19.8-p5713-s1",
            "eid": "33c1677cbe79c05d"
          }
        },
        {
          "type": "purpose",
          "text": "19.10.",
          "source": {
            "section": "19.9",
            "anchor": "#name-max_data-frames",
            "para": "19.9-p1253",
            "sent_id": "19.9-p5734-s1",
            "eid": "592673a212421afc"
          }
        },
        {
          "type": "purpose",
          "text": "19.11.",
          "source": {
            "section": "19.10",
            "anchor": "#name-max_stream_data-frames",
            "para": "19.10-p1266",
            "sent_id": "19.10-p5765-s1",
            "eid": "5c86d707b66dfe32"
          }
        },
        {
          "type": "purpose",
          "text": "19.12.",
          "source": {
            "section": "19.11",
            "anchor": "#name-max_streams-frames",
            "para": "19.11-p1278",
            "sent_id": "19.11-p5798-s1",
            "eid": "375ccbdc717d73b2"
          }
        },
        {
          "type": "purpose",
          "text": "19.13.",
          "source": {
            "section": "19.12",
            "anchor": "#name-data_blocked-frames",
            "para": "19.12-p1287",
            "sent_id": "19.12-p5814-s1",
            "eid": "ff1fbcf3f9d7e6e9"
          }
        },
        {
          "type": "purpose",
          "text": "19.14.",
          "source": {
            "section": "19.13",
            "anchor": "#name-stream_data_blocked-frames",
            "para": "19.13-p1298",
            "sent_id": "19.13-p5833-s1",
            "eid": "276184cacaadc30c"
          }
        },
        {
          "type": "purpose",
          "text": "19.15.",
          "source": {
            "section": "19.14",
            "anchor": "#name-streams_blocked-frames",
            "para": "19.14-p1308",
            "sent_id": "19.14-p5854-s1",
            "eid": "02adb5fd8711e71f"
          }
        },
        {
          "type": "purpose",
          "text": "19.16.",
          "source": {
            "section": "19.15",
            "anchor": "#name-new_connection_id-frames",
            "para": "19.15-p1327",
            "sent_id": "19.15-p5898-s1",
            "eid": "9a08d9a5ba731949"
          }
        },
        {
          "type": "purpose",
          "text": "19.17.",
          "source": {
            "section": "19.16",
            "anchor": "#name-retire_connection_id-frames",
            "para": "19.16-p1340",
            "sent_id": "19.16-p5926-s1",
            "eid": "2bbfe46e3d7f2615"
          }
        }
      ]
    },
    {
      "section": "2",
      "title": "Streams",
      "anchor": "#name-streams",
      "evidence": [
        {
          "type": "purpose",
          "text": "2.1.",
          "source": {
            "section": "2",
            "anchor": "#name-streams",
            "para": "2-p80",
            "sent_id": "2-p191-s1",
            "eid": "2c351a2721df3672"
          }
        },
        {
          "type": "purpose",
          "text": "Table 1 :",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p86",
            "sent_id": "2.1-p212-s1",
            "eid": "db17a884fc78ebc4"
          }
        },
        {
          "type": "purpose",
          "text": "2.2.",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p89",
            "sent_id": "2.1-p218-s1",
            "eid": "209a0e402cab0ae6"
          }
        },
        {
          "type": "purpose",
          "text": "2.3.",
          "source": {
            "section": "2.2",
            "anchor": "#name-sending-and-receiving-data",
            "para": "2.2-p96",
            "sent_id": "2.2-p240-s1",
            "eid": "2a4711c9b6182f2b"
          }
        },
        {
          "type": "purpose",
          "text": "2.4.",
          "source": {
            "section": "2.3",
            "anchor": "#name-stream-prioritization",
            "para": "2.3-p100",
            "sent_id": "2.3-p249-s1",
            "eid": "a12cfaf7dc718b61"
          }
        },
        {
          "type": "purpose",
          "text": "3.",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p110",
            "sent_id": "2.4-p264-s1",
            "eid": "baf4be69c579030f"
          }
        },
        {
          "type": "purpose",
          "text": "read data; and ¶",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p107",
            "sent_id": "2.4-p261-s1",
            "eid": "6953fc437d625b46"
          }
        },
        {
          "type": "normative",
          "text": "An endpoint that receives a STOP_SENDING frame MUST send a RESET_STREAM frame if the stream is in the \"Ready\" or \"Send\" state.",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p110",
            "sent_id": "2.4-p328-s65",
            "eid": "1a698e4d5b5c58fd"
          }
        },
        {
          "type": "normative",
          "text": "A QUIC endpoint MUST NOT reuse a stream ID within a connection. ",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p82",
            "sent_id": "2.1-p207-s4",
            "eid": "0a3e79b7581d7156"
          }
        }
      ]
    },
    {
      "section": "20",
      "title": "Error Codes",
      "anchor": "#name-error-codes",
      "evidence": [
        {
          "type": "purpose",
          "text": "20.1.",
          "source": {
            "section": "20",
            "anchor": "#name-error-codes",
            "para": "20-p1389",
            "sent_id": "20-p6067-s1",
            "eid": "a7ea2fe72e57db06"
          }
        },
        {
          "type": "purpose",
          "text": "20.2.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1411",
            "sent_id": "20.1-p6124-s1",
            "eid": "d3edee5a4e1cb8e3"
          }
        },
        {
          "type": "purpose",
          "text": "21.",
          "source": {
            "section": "20.2",
            "anchor": "#name-application-protocol-error-",
            "para": "20.2-p1413",
            "sent_id": "20.2-p6129-s1",
            "eid": "72ea4e567307104f"
          }
        },
        {
          "type": "purpose",
          "text": "The cryptographic handshake failed.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1408",
            "sent_id": "20.1-p6115-s1",
            "eid": "f376d3877194e7f6"
          }
        },
        {
          "type": "purpose",
          "text": "The server refused to accept a new connection. ¶",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1393",
            "sent_id": "20.1-p6099-s1",
            "eid": "aef4108619995378"
          }
        },
        {
          "type": "purpose",
          "text": "See Section 22.5 for details on registering new error codes. ¶",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1409",
            "sent_id": "20.1-p6118-s1",
            "eid": "3c15ff58365d10fb"
          }
        },
        {
          "type": "purpose",
          "text": "In defining these error codes, several principles are applied.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1410",
            "sent_id": "20.1-p6119-s1",
            "eid": "9ea30f9be7ac24c6"
          }
        }
      ]
    }
  ],
  "frame_evidence": [
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "frames": [
        "DATA_BLOCKED",
        "MAX_DATA",
        "MAX_STREAMS",
        "MAX_STREAM_DATA",
        "RESET_STREAM",
        "STOP_SENDING",
        "STREAM",
        "STREAMS_BLOCKED",
        "STREAM_DATA_BLOCKED"
      ]
    }
  ],
  "cites_pool": [
    {
      "eid": "720f215781e79bdc",
      "section": "19.8",
      "anchor": "#name-stream-frames",
      "para": "19.8-p1232",
      "sent_id": "19.8-p5695-s2"
    },
    {
      "eid": "81baac9031ce4264",
      "section": "19.9",
      "anchor": "#name-max_data-frames",
      "para": "19.9-p1246",
      "sent_id": "19.9-p5723-s2"
    },
    {
      "eid": "f408addcf636faa7",
      "section": "19",
      "anchor": "#name-frame-types-and-formats",
      "para": "19-p1109",
      "sent_id": "19-p5395-s1"
    },
    {
      "eid": "af4b7463b751bc3e",
      "section": "19.1",
      "anchor": "#name-padding-frames",
      "para": "19.1-p1116",
      "sent_id": "19.1-p5412-s1"
    },
    {
      "eid": "0a17e44f8aa704f5",
      "section": "19.2",
      "anchor": "#name-ping-frames",
      "para": "19.2-p1125",
      "sent_id": "19.2-p5425-s1"
    },
    {
      "eid": "d01360fa5fb7194e",
      "section": "19.3.1",
      "anchor": "#name-ack-ranges",
      "para": "19.3.1-p1145",
      "sent_id": "19.3.1-p5512-s2"
    },
    {
      "eid": "c0710ea8039271cd",
      "section": "19.3.2",
      "anchor": "#name-ecn-counts",
      "para": "19.3.2-p1175",
      "sent_id": "19.3.2-p5557-s1"
    },
    {
      "eid": "247207e2d4d98538",
      "section": "19.4",
      "anchor": "#name-reset_stream-frames",
      "para": "19.4-p1188",
      "sent_id": "19.4-p5579-s1"
    },
    {
      "eid": "4c66d2e99129f7a7",
      "section": "19.5",
      "anchor": "#name-stop_sending-frames",
      "para": "19.5-p1199",
      "sent_id": "19.5-p5602-s1"
    },
    {
      "eid": "9dd2d98a33191cfa",
      "section": "19.6",
      "anchor": "#name-crypto-frames",
      "para": "19.6-p1213",
      "sent_id": "19.6-p5635-s1"
    },
    {
      "eid": "34729c7b174611d2",
      "section": "19.7",
      "anchor": "#name-new_token-frames",
      "para": "19.7-p1225",
      "sent_id": "19.7-p5661-s1"
    },
    {
      "eid": "33c1677cbe79c05d",
      "section": "19.8",
      "anchor": "#name-stream-frames",
      "para": "19.8-p1243",
      "sent_id": "19.8-p5713-s1"
    },
    {
      "eid": "592673a212421afc",
      "section": "19.9",
      "anchor": "#name-max_data-frames",
      "para": "19.9-p1253",
      "sent_id": "19.9-p5734-s1"
    },
    {
      "eid": "5c86d707b66dfe32",
      "section": "19.10",
      "anchor": "#name-max_stream_data-frames",
      "para": "19.10-p1266",
      "sent_id": "19.10-p5765-s1"
    },
    {
      "eid": "375ccbdc717d73b2",
      "section": "19.11",
      "anchor": "#name-max_streams-frames",
      "para": "19.11-p1278",
      "sent_id": "19.11-p5798-s1"
    },
    {
      "eid": "ff1fbcf3f9d7e6e9",
      "section": "19.12",
      "anchor": "#name-data_blocked-frames",
      "para": "19.12-p1287",
      "sent_id": "19.12-p5814-s1"
    },
    {
      "eid": "276184cacaadc30c",
      "section": "19.13",
      "anchor": "#name-stream_data_blocked-frames",
      "para": "19.13-p1298",
      "sent_id": "19.13-p5833-s1"
    },
    {
      "eid": "02adb5fd8711e71f",
      "section": "19.14",
      "anchor": "#name-streams_blocked-frames",
      "para": "19.14-p1308",
      "sent_id": "19.14-p5854-s1"
    },
    {
      "eid": "9a08d9a5ba731949",
      "section": "19.15",
      "anchor": "#name-new_connection_id-frames",
      "para": "19.15-p1327",
      "sent_id": "19.15-p5898-s1"
    },
    {
      "eid": "2bbfe46e3d7f2615",
      "section": "19.16",
      "anchor": "#name-retire_connection_id-frames",
      "para": "19.16-p1340",
      "sent_id": "19.16-p5926-s1"
    },
    {
      "eid": "2c351a2721df3672",
      "section": "2",
      "anchor": "#name-streams",
      "para": "2-p80",
      "sent_id": "2-p191-s1"
    },
    {
      "eid": "db17a884fc78ebc4",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p86",
      "sent_id": "2.1-p212-s1"
    },
    {
      "eid": "209a0e402cab0ae6",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p89",
      "sent_id": "2.1-p218-s1"
    },
    {
      "eid": "2a4711c9b6182f2b",
      "section": "2.2",
      "anchor": "#name-sending-and-receiving-data",
      "para": "2.2-p96",
      "sent_id": "2.2-p240-s1"
    },
    {
      "eid": "a12cfaf7dc718b61",
      "section": "2.3",
      "anchor": "#name-stream-prioritization",
      "para": "2.3-p100",
      "sent_id": "2.3-p249-s1"
    },
    {
      "eid": "baf4be69c579030f",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p110",
      "sent_id": "2.4-p264-s1"
    },
    {
      "eid": "6953fc437d625b46",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p107",
      "sent_id": "2.4-p261-s1"
    },
    {
      "eid": "1a698e4d5b5c58fd",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p110",
      "sent_id": "2.4-p328-s65"
    },
    {
      "eid": "0a3e79b7581d7156",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p82",
      "sent_id": "2.1-p207-s4"
    },
    {
      "eid": "a7ea2fe72e57db06",
      "section": "20",
      "anchor": "#name-error-codes",
      "para": "20-p1389",
      "sent_id": "20-p6067-s1"
    },
    {
      "eid": "d3edee5a4e1cb8e3",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1411",
      "sent_id": "20.1-p6124-s1"
    },
    {
      "eid": "72ea4e567307104f",
      "section": "20.2",
      "anchor": "#name-application-protocol-error-",
      "para": "20.2-p1413",
      "sent_id": "20.2-p6129-s1"
    },
    {
      "eid": "f376d3877194e7f6",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1408",
      "sent_id": "20.1-p6115-s1"
    },
    {
      "eid": "aef4108619995378",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1393",
      "sent_id": "20.1-p6099-s1"
    },
    {
      "eid": "3c15ff58365d10fb",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1409",
      "sent_id": "20.1-p6118-s1"
    },
    {
      "eid": "9ea30f9be7ac24c6",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1410",
      "sent_id": "20.1-p6119-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}
2025-09-25 14:42:51,664 - INFO - subprotocolextractor_eid.py:569 - ====end prompt====
2025-09-25 14:43:03,993 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 14:43:04,099 - INFO - subprotocolextractor_eid.py:579 - [Shard 1] 收到结果 1775 chars
2025-09-25 14:43:04,108 - WARNING - subprotocolextractor_eid.py:543 - [Shard 2] 超预算，启动二次裁剪 evidence…
2025-09-25 14:43:04,137 - INFO - subprotocolextractor_eid.py:558 - [Shard 2] 发送 tokens≈3698
2025-09-25 14:43:04,137 - INFO - subprotocolextractor_eid.py:561 - ====prompt====
2025-09-25 14:43:04,138 - INFO - subprotocolextractor_eid.py:562 - System Prompt:
你是“协议规范编译器”。任务：仅依据提供的 RFC 证据（含章节号与锚点），
把 QUIC (RFC 9000) 的主要子协议划分出来，并给出用途、关键帧、依赖与边界。
铁规：
1) 仅使用输入 evidence；禁止外部知识或猜测。
2) 每条结论必须给 cites（引用 eid，来自 cites_pool）。
3) 允许内部推理，但最终只输出 JSON；不得输出推理过程。
4) 术语统一：client≈initiator，server≈responder，endpoint≈peer；帧名保持全大写。
5) 模态优先级：MUST/SHALL > SHOULD/RECOMMENDED > MAY/OPTIONAL；冲突时偏向强模态。
6) 证据不足时，输出 open_questions[] 指明缺口与应补小节/帧。
7) 严格符合 JSON Schema，勿添加未定义字段。
2025-09-25 14:43:04,138 - INFO - subprotocolextractor_eid.py:563 - ----
2025-09-25 14:43:04,138 - INFO - subprotocolextractor_eid.py:564 - Developer Prompt:
【工作流】
A. 候选模块：从 toc + evidence 导言/目的/规范句中归纳主要子协议（Streams、Flow Control、Connection Management/Migration、Connection-level 传输、Connection Closure 等，前提是有证据）。
B. purpose：用导言/目的句凝练（≤200字符），附 1–3 条 cites。
C. 边界与依赖：boundaries.includes（小节号集合）、excludes（明确不含主题，如 RFC9001/9002）；depends_on（如 Streams 依赖 Flow Control）。
D. key_frames：把与该模块相关的帧名（仅名称）列出；证据可来自 §19.* 的帧定义或正文提及。
E. 覆盖检查：若 frame_evidence 里有帧未被任何模块收录，加入 open_questions。
F. cites 必须是**字符串数组**，且只能取自 cites_pool.eid。禁止使用 section/anchor 文本；禁止自造 eid。
【输出 JSON Schema】
{
  "type":"object",
  "required":["subprotocols","open_questions"],
  "properties":{
    "subprotocols":{"type":"array","items":{
      "type":"object",
      "required":["name","purpose","key_frames","depends_on","boundaries","cites"],
      "properties":{
        "name":{"type":"string"},
        "purpose":{"type":"string","maxLength":200},
        "key_frames":{"type":"array","items":{"type":"string"}},
        "depends_on":{"type":"array","items":{"type":"string"}},
        "boundaries":{"type":"object","properties":{
          "includes":{"type":"array","items":{"type":"string"}},
          "excludes":{"type":"array","items":{"type":"string"}}
        }},
        "cites":{"type":"array","items":{"type":"string"}}
      }
    }},
    "open_questions":{"type":"array","items":{
      "type":"object",
      "required":["ask"],
      "properties":{
        "ask":{"type":"string"},
        "related_frames":{"type":"array","items":{"type":"string"}},
        "wanted_sections":{"type":"array","items":{"type":"string"}}
      }
    }}
  }
}
2025-09-25 14:43:04,139 - INFO - subprotocolextractor_eid.py:565 - ----
2025-09-25 14:43:04,139 - INFO - subprotocolextractor_eid.py:566 - User Prompt:
任务：在 RFC 证据范围内，抽取‘主要子协议/主要部分’用于后续选择建模范围。
只输出符合上方 JSON Schema 的 JSON。每条字段都要给 cites，且 cites 只能是 cites_pool 中的 eid（字符串）。

=== ContextPacket (subprotocols) ===
{
  "toc": [
    {
      "section": "22",
      "title": "IANA Considerations",
      "anchor": "#name-iana-considerations",
      "order": 194
    },
    {
      "section": "21",
      "title": "Security Considerations",
      "anchor": "#name-security-considerations",
      "order": 163
    },
    {
      "section": "23",
      "title": "References",
      "anchor": "#name-references",
      "order": 204
    }
  ],
  "evidence": [
    {
      "section": "21",
      "title": "Security Considerations",
      "anchor": "#name-security-considerations",
      "evidence": [
        {
          "type": "purpose",
          "text": "21.1.",
          "source": {
            "section": "21",
            "anchor": "#name-security-considerations",
            "para": "21-p1415",
            "sent_id": "21-p6292-s1",
            "eid": "99b5c91120f39115"
          }
        },
        {
          "type": "purpose",
          "text": "Note:",
          "source": {
            "section": "21.1.1.1",
            "anchor": "#name-anti-amplification",
            "para": "21.1.1.1-p1429",
            "sent_id": "21.1.1.1-p6383-s1",
            "eid": "6c1fe9467b53aa6b"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.2.",
          "source": {
            "section": "21.1.1.4",
            "anchor": "#name-parameter-negotiation",
            "para": "21.1.1.4-p1439",
            "sent_id": "21.1.1.4-p6410-s1",
            "eid": "6a427c160ea8f91d"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.3.",
          "source": {
            "section": "21.1.2",
            "anchor": "#name-protected-packets-2",
            "para": "21.1.2-p1445",
            "sent_id": "21.1.2-p6425-s1",
            "eid": "227af6a15abd2b6f"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.3.3.",
          "source": {
            "section": "21.1.3.2",
            "anchor": "#name-off-path-active-attacks",
            "para": "21.1.3.2-p1488",
            "sent_id": "21.1.3.2-p6495-s1",
            "eid": "c60f57ae4ff2f743"
          }
        },
        {
          "type": "purpose",
          "text": "21.2.",
          "source": {
            "section": "21.1.3.3",
            "anchor": "#name-limited-on-path-active-atta",
            "para": "21.1.3.3-p1506",
            "sent_id": "21.1.3.3-p6518-s1",
            "eid": "bf3309ef8c6b9d17"
          }
        },
        {
          "type": "purpose",
          "text": "21.3.",
          "source": {
            "section": "21.2",
            "anchor": "#name-handshake-denial-of-service",
            "para": "21.2-p1515",
            "sent_id": "21.2-p6556-s1",
            "eid": "3c252d11d81e4e61"
          }
        },
        {
          "type": "purpose",
          "text": "21.4.",
          "source": {
            "section": "21.3",
            "anchor": "#name-amplification-attack",
            "para": "21.3-p1518",
            "sent_id": "21.3-p6564-s1",
            "eid": "6f7113c5d0bd9b9b"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.",
          "source": {
            "section": "21.4",
            "anchor": "#name-optimistic-ack-attack",
            "para": "21.4-p1520",
            "sent_id": "21.4-p6571-s1",
            "eid": "19f858c6cf4f7ed5"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.1.",
          "source": {
            "section": "21.5",
            "anchor": "#name-request-forgery-attacks",
            "para": "21.5-p1529",
            "sent_id": "21.5-p6645-s1",
            "eid": "7ef453a0b9336c53"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.2.",
          "source": {
            "section": "21.5.1",
            "anchor": "#name-control-options-for-endpoin",
            "para": "21.5.1-p1539",
            "sent_id": "21.5.1-p6672-s1",
            "eid": "5c0f380133776e8a"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.3.",
          "source": {
            "section": "21.5.2",
            "anchor": "#name-request-forgery-with-client",
            "para": "21.5.2-p1546",
            "sent_id": "21.5.2-p6700-s1",
            "eid": "1831a0e6ab9ee6cc"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.4.",
          "source": {
            "section": "21.5.3",
            "anchor": "#name-request-forgery-with-prefer",
            "para": "21.5.3-p1550",
            "sent_id": "21.5.3-p6711-s1",
            "eid": "017b4f2e483de891"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.5.",
          "source": {
            "section": "21.5.4",
            "anchor": "#name-request-forgery-with-spoofe",
            "para": "21.5.4-p1555",
            "sent_id": "21.5.4-p6725-s1",
            "eid": "5fd5d7de534192d1"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.6.",
          "source": {
            "section": "21.5.5",
            "anchor": "#name-request-forgery-with-versio",
            "para": "21.5.5-p1559",
            "sent_id": "21.5.5-p6734-s1",
            "eid": "8a3b83a4d2e2a87c"
          }
        }
      ]
    }
  ],
  "frame_evidence": [],
  "cites_pool": [
    {
      "eid": "99b5c91120f39115",
      "section": "21",
      "anchor": "#name-security-considerations",
      "para": "21-p1415",
      "sent_id": "21-p6292-s1"
    },
    {
      "eid": "6c1fe9467b53aa6b",
      "section": "21.1.1.1",
      "anchor": "#name-anti-amplification",
      "para": "21.1.1.1-p1429",
      "sent_id": "21.1.1.1-p6383-s1"
    },
    {
      "eid": "6a427c160ea8f91d",
      "section": "21.1.1.4",
      "anchor": "#name-parameter-negotiation",
      "para": "21.1.1.4-p1439",
      "sent_id": "21.1.1.4-p6410-s1"
    },
    {
      "eid": "227af6a15abd2b6f",
      "section": "21.1.2",
      "anchor": "#name-protected-packets-2",
      "para": "21.1.2-p1445",
      "sent_id": "21.1.2-p6425-s1"
    },
    {
      "eid": "c60f57ae4ff2f743",
      "section": "21.1.3.2",
      "anchor": "#name-off-path-active-attacks",
      "para": "21.1.3.2-p1488",
      "sent_id": "21.1.3.2-p6495-s1"
    },
    {
      "eid": "bf3309ef8c6b9d17",
      "section": "21.1.3.3",
      "anchor": "#name-limited-on-path-active-atta",
      "para": "21.1.3.3-p1506",
      "sent_id": "21.1.3.3-p6518-s1"
    },
    {
      "eid": "3c252d11d81e4e61",
      "section": "21.2",
      "anchor": "#name-handshake-denial-of-service",
      "para": "21.2-p1515",
      "sent_id": "21.2-p6556-s1"
    },
    {
      "eid": "6f7113c5d0bd9b9b",
      "section": "21.3",
      "anchor": "#name-amplification-attack",
      "para": "21.3-p1518",
      "sent_id": "21.3-p6564-s1"
    },
    {
      "eid": "19f858c6cf4f7ed5",
      "section": "21.4",
      "anchor": "#name-optimistic-ack-attack",
      "para": "21.4-p1520",
      "sent_id": "21.4-p6571-s1"
    },
    {
      "eid": "7ef453a0b9336c53",
      "section": "21.5",
      "anchor": "#name-request-forgery-attacks",
      "para": "21.5-p1529",
      "sent_id": "21.5-p6645-s1"
    },
    {
      "eid": "5c0f380133776e8a",
      "section": "21.5.1",
      "anchor": "#name-control-options-for-endpoin",
      "para": "21.5.1-p1539",
      "sent_id": "21.5.1-p6672-s1"
    },
    {
      "eid": "1831a0e6ab9ee6cc",
      "section": "21.5.2",
      "anchor": "#name-request-forgery-with-client",
      "para": "21.5.2-p1546",
      "sent_id": "21.5.2-p6700-s1"
    },
    {
      "eid": "017b4f2e483de891",
      "section": "21.5.3",
      "anchor": "#name-request-forgery-with-prefer",
      "para": "21.5.3-p1550",
      "sent_id": "21.5.3-p6711-s1"
    },
    {
      "eid": "5fd5d7de534192d1",
      "section": "21.5.4",
      "anchor": "#name-request-forgery-with-spoofe",
      "para": "21.5.4-p1555",
      "sent_id": "21.5.4-p6725-s1"
    },
    {
      "eid": "8a3b83a4d2e2a87c",
      "section": "21.5.5",
      "anchor": "#name-request-forgery-with-versio",
      "para": "21.5.5-p1559",
      "sent_id": "21.5.5-p6734-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}

2025-09-25 14:43:04,141 - INFO - subprotocolextractor_eid.py:567 - ----
2025-09-25 14:43:04,142 - INFO - subprotocolextractor_eid.py:568 - Packet Data:
{
  "toc": [
    {
      "section": "22",
      "title": "IANA Considerations",
      "anchor": "#name-iana-considerations",
      "order": 194
    },
    {
      "section": "21",
      "title": "Security Considerations",
      "anchor": "#name-security-considerations",
      "order": 163
    },
    {
      "section": "23",
      "title": "References",
      "anchor": "#name-references",
      "order": 204
    }
  ],
  "evidence": [
    {
      "section": "21",
      "title": "Security Considerations",
      "anchor": "#name-security-considerations",
      "evidence": [
        {
          "type": "purpose",
          "text": "21.1.",
          "source": {
            "section": "21",
            "anchor": "#name-security-considerations",
            "para": "21-p1415",
            "sent_id": "21-p6292-s1",
            "eid": "99b5c91120f39115"
          }
        },
        {
          "type": "purpose",
          "text": "Note:",
          "source": {
            "section": "21.1.1.1",
            "anchor": "#name-anti-amplification",
            "para": "21.1.1.1-p1429",
            "sent_id": "21.1.1.1-p6383-s1",
            "eid": "6c1fe9467b53aa6b"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.2.",
          "source": {
            "section": "21.1.1.4",
            "anchor": "#name-parameter-negotiation",
            "para": "21.1.1.4-p1439",
            "sent_id": "21.1.1.4-p6410-s1",
            "eid": "6a427c160ea8f91d"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.3.",
          "source": {
            "section": "21.1.2",
            "anchor": "#name-protected-packets-2",
            "para": "21.1.2-p1445",
            "sent_id": "21.1.2-p6425-s1",
            "eid": "227af6a15abd2b6f"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.3.3.",
          "source": {
            "section": "21.1.3.2",
            "anchor": "#name-off-path-active-attacks",
            "para": "21.1.3.2-p1488",
            "sent_id": "21.1.3.2-p6495-s1",
            "eid": "c60f57ae4ff2f743"
          }
        },
        {
          "type": "purpose",
          "text": "21.2.",
          "source": {
            "section": "21.1.3.3",
            "anchor": "#name-limited-on-path-active-atta",
            "para": "21.1.3.3-p1506",
            "sent_id": "21.1.3.3-p6518-s1",
            "eid": "bf3309ef8c6b9d17"
          }
        },
        {
          "type": "purpose",
          "text": "21.3.",
          "source": {
            "section": "21.2",
            "anchor": "#name-handshake-denial-of-service",
            "para": "21.2-p1515",
            "sent_id": "21.2-p6556-s1",
            "eid": "3c252d11d81e4e61"
          }
        },
        {
          "type": "purpose",
          "text": "21.4.",
          "source": {
            "section": "21.3",
            "anchor": "#name-amplification-attack",
            "para": "21.3-p1518",
            "sent_id": "21.3-p6564-s1",
            "eid": "6f7113c5d0bd9b9b"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.",
          "source": {
            "section": "21.4",
            "anchor": "#name-optimistic-ack-attack",
            "para": "21.4-p1520",
            "sent_id": "21.4-p6571-s1",
            "eid": "19f858c6cf4f7ed5"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.1.",
          "source": {
            "section": "21.5",
            "anchor": "#name-request-forgery-attacks",
            "para": "21.5-p1529",
            "sent_id": "21.5-p6645-s1",
            "eid": "7ef453a0b9336c53"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.2.",
          "source": {
            "section": "21.5.1",
            "anchor": "#name-control-options-for-endpoin",
            "para": "21.5.1-p1539",
            "sent_id": "21.5.1-p6672-s1",
            "eid": "5c0f380133776e8a"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.3.",
          "source": {
            "section": "21.5.2",
            "anchor": "#name-request-forgery-with-client",
            "para": "21.5.2-p1546",
            "sent_id": "21.5.2-p6700-s1",
            "eid": "1831a0e6ab9ee6cc"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.4.",
          "source": {
            "section": "21.5.3",
            "anchor": "#name-request-forgery-with-prefer",
            "para": "21.5.3-p1550",
            "sent_id": "21.5.3-p6711-s1",
            "eid": "017b4f2e483de891"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.5.",
          "source": {
            "section": "21.5.4",
            "anchor": "#name-request-forgery-with-spoofe",
            "para": "21.5.4-p1555",
            "sent_id": "21.5.4-p6725-s1",
            "eid": "5fd5d7de534192d1"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.6.",
          "source": {
            "section": "21.5.5",
            "anchor": "#name-request-forgery-with-versio",
            "para": "21.5.5-p1559",
            "sent_id": "21.5.5-p6734-s1",
            "eid": "8a3b83a4d2e2a87c"
          }
        }
      ]
    },
    {
      "section": "22",
      "title": "IANA Considerations",
      "anchor": "#name-iana-considerations",
      "evidence": [
        {
          "type": "purpose",
          "text": "22.1.",
          "source": {
            "section": "22",
            "anchor": "#name-iana-considerations",
            "para": "22-p1600",
            "sent_id": "22-p6926-s1",
            "eid": "4974c79491bee773"
          }
        },
        {
          "type": "purpose",
          "text": "22.1.2.",
          "source": {
            "section": "22.1.1",
            "anchor": "#name-provisional-registrations",
            "para": "22.1.1-p1615",
            "sent_id": "22.1.1-p6991-s1",
            "eid": "b1399e5c4c21f701"
          }
        },
        {
          "type": "purpose",
          "text": "22.1.3.",
          "source": {
            "section": "22.1.2",
            "anchor": "#name-selecting-codepoints",
            "para": "22.1.2-p1620",
            "sent_id": "22.1.2-p7005-s1",
            "eid": "80dd304772e03d04"
          }
        },
        {
          "type": "purpose",
          "text": "22.1.4.",
          "source": {
            "section": "22.1.3",
            "anchor": "#name-reclaiming-provisional-code",
            "para": "22.1.3-p1626",
            "sent_id": "22.1.3-p7024-s1",
            "eid": "20cc09fd0e6a350a"
          }
        },
        {
          "type": "purpose",
          "text": "22.2.",
          "source": {
            "section": "22.1.4",
            "anchor": "#name-permanent-registrations",
            "para": "22.1.4-p1632",
            "sent_id": "22.1.4-p7041-s1",
            "eid": "776664e2a86b0eab"
          }
        },
        {
          "type": "purpose",
          "text": "22.3.",
          "source": {
            "section": "22.2",
            "anchor": "#name-quic-versions-registry",
            "para": "22.2-p1637",
            "sent_id": "22.2-p7053-s1",
            "eid": "a68c69f1658bcf27"
          }
        },
        {
          "type": "purpose",
          "text": "Table 6 :",
          "source": {
            "section": "22.3",
            "anchor": "#name-quic-transport-parameters-r",
            "para": "22.3-p1643",
            "sent_id": "22.3-p7066-s1",
            "eid": "ddcc1e9b4d5317ce"
          }
        },
        {
          "type": "purpose",
          "text": "22.4.",
          "source": {
            "section": "22.3",
            "anchor": "#name-quic-transport-parameters-r",
            "para": "22.3-p1646",
            "sent_id": "22.3-p7071-s1",
            "eid": "cb312bed21ab4942"
          }
        },
        {
          "type": "purpose",
          "text": "22.5.",
          "source": {
            "section": "22.4",
            "anchor": "#name-quic-frame-types-registry",
            "para": "22.4-p1653",
            "sent_id": "22.4-p7090-s1",
            "eid": "641fbfe49e1e5cd6"
          }
        },
        {
          "type": "purpose",
          "text": "Table 7 :",
          "source": {
            "section": "22.5",
            "anchor": "#name-quic-transport-error-codes-",
            "para": "22.5-p1660",
            "sent_id": "22.5-p7105-s1",
            "eid": "be94eb011f0a4c30"
          }
        },
        {
          "type": "purpose",
          "text": "The assigned codepoint. ¶",
          "source": {
            "section": "22.1.1",
            "anchor": "#name-provisional-registrations",
            "para": "22.1.1-p1607",
            "sent_id": "22.1.1-p6982-s1",
            "eid": "3829b016201a2811"
          }
        },
        {
          "type": "purpose",
          "text": "A request to remove a codepoint MUST be reviewed by the designated experts.",
          "source": {
            "section": "22.1.3",
            "anchor": "#name-reclaiming-provisional-code",
            "para": "22.1.3-p1622",
            "sent_id": "22.1.3-p7015-s1",
            "eid": "52edd6b4594579a0"
          }
        },
        {
          "type": "purpose",
          "text": "ns made by Standards Track publications MUST be permanent. ¶",
          "source": {
            "section": "22.1.4",
            "anchor": "#name-permanent-registrations",
            "para": "22.1.4-p1630",
            "sent_id": "22.1.4-p7039-s1",
            "eid": "621a875befbe713b"
          }
        }
      ]
    },
    {
      "section": "23",
      "title": "References",
      "anchor": "#name-references",
      "evidence": [
        {
          "type": "purpose",
          "text": "A.1.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1666",
            "sent_id": "23.2-p7138-s1",
            "eid": "798f6ca429d20e08"
          }
        },
        {
          "type": "purpose",
          "text": "A.2.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1673",
            "sent_id": "23.2-p7151-s1",
            "eid": "d03885badf27a315"
          }
        },
        {
          "type": "purpose",
          "text": "A.3.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1684",
            "sent_id": "23.2-p7168-s1",
            "eid": "af7bcefede172b12"
          }
        },
        {
          "type": "purpose",
          "text": "A.4.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1695",
            "sent_id": "23.2-p7183-s1",
            "eid": "7f81c107a51897f4"
          }
        },
        {
          "type": "purpose",
          "text": "Fastly",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1773",
            "sent_id": "23.2-p7286-s1",
            "eid": "2181c2c6912bf82c"
          }
        },
        {
          "type": "purpose",
          "text": "Mozilla",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1776",
            "sent_id": "23.2-p7289-s1",
            "eid": "da84aa84218a564d"
          }
        },
        {
          "type": "purpose",
          "text": "Appendix A.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1663",
            "sent_id": "23.2-p7112-s1",
            "eid": "e9c915f9430dbbfc"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 45 :",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1671",
            "sent_id": "23.2-p7148-s1",
            "eid": "1f054f948f7bfb8c"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 46 :",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1681",
            "sent_id": "23.2-p7163-s1",
            "eid": "5b5ea4095d9f687c"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 47 :",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1693",
            "sent_id": "23.2-p7180-s1",
            "eid": "0f7c2beca8a774a7"
          }
        },
        {
          "type": "purpose",
          "text": "Ian Swett ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1729",
            "sent_id": "23.2-p7242-s1",
            "eid": "740e48b4c0c97364"
          }
        },
        {
          "type": "purpose",
          "text": "Tom Jones ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1767",
            "sent_id": "23.2-p7280-s1",
            "eid": "ade603ff9b281a76"
          }
        },
        {
          "type": "purpose",
          "text": "Nick Banks ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1751",
            "sent_id": "23.2-p7264-s1",
            "eid": "5361611569a4a777"
          }
        },
        {
          "type": "purpose",
          "text": "Ted Hardie ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1765",
            "sent_id": "23.2-p7278-s1",
            "eid": "dff2918b5988859a"
          }
        },
        {
          "type": "purpose",
          "text": "Alyssa Wilk ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1709",
            "sent_id": "23.2-p7222-s1",
            "eid": "b760973ab06c1986"
          }
        },
        {
          "type": "purpose",
          "text": "Lars Eggert ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1735",
            "sent_id": "23.2-p7248-s1",
            "eid": "1b54590151284d80"
          }
        },
        {
          "type": "purpose",
          "text": "Martin Duke ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1743",
            "sent_id": "23.2-p7256-s1",
            "eid": "8ff7fbd0a9710cb3"
          }
        },
        {
          "type": "purpose",
          "text": "Mike Bishop ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1745",
            "sent_id": "23.2-p7258-s1",
            "eid": "44a30dd979b3e414"
          }
        },
        {
          "type": "purpose",
          "text": "Nick Harper ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1753",
            "sent_id": "23.2-p7266-s1",
            "eid": "2cdb2a56c3645c06"
          }
        },
        {
          "type": "purpose",
          "text": "Eric Kinnear ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1723",
            "sent_id": "23.2-p7236-s1",
            "eid": "618971d953fb5146"
          }
        },
        {
          "type": "purpose",
          "text": "Lucas Pardue ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1737",
            "sent_id": "23.2-p7250-s1",
            "eid": "a540754914faea49"
          }
        }
      ]
    }
  ],
  "frame_evidence": [],
  "cites_pool": [
    {
      "eid": "99b5c91120f39115",
      "section": "21",
      "anchor": "#name-security-considerations",
      "para": "21-p1415",
      "sent_id": "21-p6292-s1"
    },
    {
      "eid": "6c1fe9467b53aa6b",
      "section": "21.1.1.1",
      "anchor": "#name-anti-amplification",
      "para": "21.1.1.1-p1429",
      "sent_id": "21.1.1.1-p6383-s1"
    },
    {
      "eid": "6a427c160ea8f91d",
      "section": "21.1.1.4",
      "anchor": "#name-parameter-negotiation",
      "para": "21.1.1.4-p1439",
      "sent_id": "21.1.1.4-p6410-s1"
    },
    {
      "eid": "227af6a15abd2b6f",
      "section": "21.1.2",
      "anchor": "#name-protected-packets-2",
      "para": "21.1.2-p1445",
      "sent_id": "21.1.2-p6425-s1"
    },
    {
      "eid": "c60f57ae4ff2f743",
      "section": "21.1.3.2",
      "anchor": "#name-off-path-active-attacks",
      "para": "21.1.3.2-p1488",
      "sent_id": "21.1.3.2-p6495-s1"
    },
    {
      "eid": "bf3309ef8c6b9d17",
      "section": "21.1.3.3",
      "anchor": "#name-limited-on-path-active-atta",
      "para": "21.1.3.3-p1506",
      "sent_id": "21.1.3.3-p6518-s1"
    },
    {
      "eid": "3c252d11d81e4e61",
      "section": "21.2",
      "anchor": "#name-handshake-denial-of-service",
      "para": "21.2-p1515",
      "sent_id": "21.2-p6556-s1"
    },
    {
      "eid": "6f7113c5d0bd9b9b",
      "section": "21.3",
      "anchor": "#name-amplification-attack",
      "para": "21.3-p1518",
      "sent_id": "21.3-p6564-s1"
    },
    {
      "eid": "19f858c6cf4f7ed5",
      "section": "21.4",
      "anchor": "#name-optimistic-ack-attack",
      "para": "21.4-p1520",
      "sent_id": "21.4-p6571-s1"
    },
    {
      "eid": "7ef453a0b9336c53",
      "section": "21.5",
      "anchor": "#name-request-forgery-attacks",
      "para": "21.5-p1529",
      "sent_id": "21.5-p6645-s1"
    },
    {
      "eid": "5c0f380133776e8a",
      "section": "21.5.1",
      "anchor": "#name-control-options-for-endpoin",
      "para": "21.5.1-p1539",
      "sent_id": "21.5.1-p6672-s1"
    },
    {
      "eid": "1831a0e6ab9ee6cc",
      "section": "21.5.2",
      "anchor": "#name-request-forgery-with-client",
      "para": "21.5.2-p1546",
      "sent_id": "21.5.2-p6700-s1"
    },
    {
      "eid": "017b4f2e483de891",
      "section": "21.5.3",
      "anchor": "#name-request-forgery-with-prefer",
      "para": "21.5.3-p1550",
      "sent_id": "21.5.3-p6711-s1"
    },
    {
      "eid": "5fd5d7de534192d1",
      "section": "21.5.4",
      "anchor": "#name-request-forgery-with-spoofe",
      "para": "21.5.4-p1555",
      "sent_id": "21.5.4-p6725-s1"
    },
    {
      "eid": "8a3b83a4d2e2a87c",
      "section": "21.5.5",
      "anchor": "#name-request-forgery-with-versio",
      "para": "21.5.5-p1559",
      "sent_id": "21.5.5-p6734-s1"
    },
    {
      "eid": "4974c79491bee773",
      "section": "22",
      "anchor": "#name-iana-considerations",
      "para": "22-p1600",
      "sent_id": "22-p6926-s1"
    },
    {
      "eid": "b1399e5c4c21f701",
      "section": "22.1.1",
      "anchor": "#name-provisional-registrations",
      "para": "22.1.1-p1615",
      "sent_id": "22.1.1-p6991-s1"
    },
    {
      "eid": "80dd304772e03d04",
      "section": "22.1.2",
      "anchor": "#name-selecting-codepoints",
      "para": "22.1.2-p1620",
      "sent_id": "22.1.2-p7005-s1"
    },
    {
      "eid": "20cc09fd0e6a350a",
      "section": "22.1.3",
      "anchor": "#name-reclaiming-provisional-code",
      "para": "22.1.3-p1626",
      "sent_id": "22.1.3-p7024-s1"
    },
    {
      "eid": "776664e2a86b0eab",
      "section": "22.1.4",
      "anchor": "#name-permanent-registrations",
      "para": "22.1.4-p1632",
      "sent_id": "22.1.4-p7041-s1"
    },
    {
      "eid": "a68c69f1658bcf27",
      "section": "22.2",
      "anchor": "#name-quic-versions-registry",
      "para": "22.2-p1637",
      "sent_id": "22.2-p7053-s1"
    },
    {
      "eid": "ddcc1e9b4d5317ce",
      "section": "22.3",
      "anchor": "#name-quic-transport-parameters-r",
      "para": "22.3-p1643",
      "sent_id": "22.3-p7066-s1"
    },
    {
      "eid": "cb312bed21ab4942",
      "section": "22.3",
      "anchor": "#name-quic-transport-parameters-r",
      "para": "22.3-p1646",
      "sent_id": "22.3-p7071-s1"
    },
    {
      "eid": "641fbfe49e1e5cd6",
      "section": "22.4",
      "anchor": "#name-quic-frame-types-registry",
      "para": "22.4-p1653",
      "sent_id": "22.4-p7090-s1"
    },
    {
      "eid": "be94eb011f0a4c30",
      "section": "22.5",
      "anchor": "#name-quic-transport-error-codes-",
      "para": "22.5-p1660",
      "sent_id": "22.5-p7105-s1"
    },
    {
      "eid": "3829b016201a2811",
      "section": "22.1.1",
      "anchor": "#name-provisional-registrations",
      "para": "22.1.1-p1607",
      "sent_id": "22.1.1-p6982-s1"
    },
    {
      "eid": "52edd6b4594579a0",
      "section": "22.1.3",
      "anchor": "#name-reclaiming-provisional-code",
      "para": "22.1.3-p1622",
      "sent_id": "22.1.3-p7015-s1"
    },
    {
      "eid": "621a875befbe713b",
      "section": "22.1.4",
      "anchor": "#name-permanent-registrations",
      "para": "22.1.4-p1630",
      "sent_id": "22.1.4-p7039-s1"
    },
    {
      "eid": "798f6ca429d20e08",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1666",
      "sent_id": "23.2-p7138-s1"
    },
    {
      "eid": "d03885badf27a315",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1673",
      "sent_id": "23.2-p7151-s1"
    },
    {
      "eid": "af7bcefede172b12",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1684",
      "sent_id": "23.2-p7168-s1"
    },
    {
      "eid": "7f81c107a51897f4",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1695",
      "sent_id": "23.2-p7183-s1"
    },
    {
      "eid": "2181c2c6912bf82c",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1773",
      "sent_id": "23.2-p7286-s1"
    },
    {
      "eid": "da84aa84218a564d",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1776",
      "sent_id": "23.2-p7289-s1"
    },
    {
      "eid": "e9c915f9430dbbfc",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1663",
      "sent_id": "23.2-p7112-s1"
    },
    {
      "eid": "1f054f948f7bfb8c",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1671",
      "sent_id": "23.2-p7148-s1"
    },
    {
      "eid": "5b5ea4095d9f687c",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1681",
      "sent_id": "23.2-p7163-s1"
    },
    {
      "eid": "0f7c2beca8a774a7",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1693",
      "sent_id": "23.2-p7180-s1"
    },
    {
      "eid": "740e48b4c0c97364",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1729",
      "sent_id": "23.2-p7242-s1"
    },
    {
      "eid": "ade603ff9b281a76",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1767",
      "sent_id": "23.2-p7280-s1"
    },
    {
      "eid": "5361611569a4a777",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1751",
      "sent_id": "23.2-p7264-s1"
    },
    {
      "eid": "dff2918b5988859a",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1765",
      "sent_id": "23.2-p7278-s1"
    },
    {
      "eid": "b760973ab06c1986",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1709",
      "sent_id": "23.2-p7222-s1"
    },
    {
      "eid": "1b54590151284d80",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1735",
      "sent_id": "23.2-p7248-s1"
    },
    {
      "eid": "8ff7fbd0a9710cb3",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1743",
      "sent_id": "23.2-p7256-s1"
    },
    {
      "eid": "44a30dd979b3e414",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1745",
      "sent_id": "23.2-p7258-s1"
    },
    {
      "eid": "2cdb2a56c3645c06",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1753",
      "sent_id": "23.2-p7266-s1"
    },
    {
      "eid": "618971d953fb5146",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1723",
      "sent_id": "23.2-p7236-s1"
    },
    {
      "eid": "a540754914faea49",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1737",
      "sent_id": "23.2-p7250-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}
2025-09-25 14:43:04,146 - INFO - subprotocolextractor_eid.py:569 - ====end prompt====
2025-09-25 14:43:08,853 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 14:43:08,857 - INFO - subprotocolextractor_eid.py:579 - [Shard 2] 收到结果 844 chars
2025-09-25 14:43:08,876 - INFO - subprotocolextractor_eid.py:558 - [Shard 3] 发送 tokens≈4623
2025-09-25 14:43:08,876 - INFO - subprotocolextractor_eid.py:561 - ====prompt====
2025-09-25 14:43:08,877 - INFO - subprotocolextractor_eid.py:562 - System Prompt:
你是“协议规范编译器”。任务：仅依据提供的 RFC 证据（含章节号与锚点），
把 QUIC (RFC 9000) 的主要子协议划分出来，并给出用途、关键帧、依赖与边界。
铁规：
1) 仅使用输入 evidence；禁止外部知识或猜测。
2) 每条结论必须给 cites（引用 eid，来自 cites_pool）。
3) 允许内部推理，但最终只输出 JSON；不得输出推理过程。
4) 术语统一：client≈initiator，server≈responder，endpoint≈peer；帧名保持全大写。
5) 模态优先级：MUST/SHALL > SHOULD/RECOMMENDED > MAY/OPTIONAL；冲突时偏向强模态。
6) 证据不足时，输出 open_questions[] 指明缺口与应补小节/帧。
7) 严格符合 JSON Schema，勿添加未定义字段。
2025-09-25 14:43:08,879 - INFO - subprotocolextractor_eid.py:563 - ----
2025-09-25 14:43:08,880 - INFO - subprotocolextractor_eid.py:564 - Developer Prompt:
【工作流】
A. 候选模块：从 toc + evidence 导言/目的/规范句中归纳主要子协议（Streams、Flow Control、Connection Management/Migration、Connection-level 传输、Connection Closure 等，前提是有证据）。
B. purpose：用导言/目的句凝练（≤200字符），附 1–3 条 cites。
C. 边界与依赖：boundaries.includes（小节号集合）、excludes（明确不含主题，如 RFC9001/9002）；depends_on（如 Streams 依赖 Flow Control）。
D. key_frames：把与该模块相关的帧名（仅名称）列出；证据可来自 §19.* 的帧定义或正文提及。
E. 覆盖检查：若 frame_evidence 里有帧未被任何模块收录，加入 open_questions。
F. cites 必须是**字符串数组**，且只能取自 cites_pool.eid。禁止使用 section/anchor 文本；禁止自造 eid。
【输出 JSON Schema】
{
  "type":"object",
  "required":["subprotocols","open_questions"],
  "properties":{
    "subprotocols":{"type":"array","items":{
      "type":"object",
      "required":["name","purpose","key_frames","depends_on","boundaries","cites"],
      "properties":{
        "name":{"type":"string"},
        "purpose":{"type":"string","maxLength":200},
        "key_frames":{"type":"array","items":{"type":"string"}},
        "depends_on":{"type":"array","items":{"type":"string"}},
        "boundaries":{"type":"object","properties":{
          "includes":{"type":"array","items":{"type":"string"}},
          "excludes":{"type":"array","items":{"type":"string"}}
        }},
        "cites":{"type":"array","items":{"type":"string"}}
      }
    }},
    "open_questions":{"type":"array","items":{
      "type":"object",
      "required":["ask"],
      "properties":{
        "ask":{"type":"string"},
        "related_frames":{"type":"array","items":{"type":"string"}},
        "wanted_sections":{"type":"array","items":{"type":"string"}}
      }
    }}
  }
}
2025-09-25 14:43:08,882 - INFO - subprotocolextractor_eid.py:565 - ----
2025-09-25 14:43:08,883 - INFO - subprotocolextractor_eid.py:566 - User Prompt:
任务：在 RFC 证据范围内，抽取‘主要子协议/主要部分’用于后续选择建模范围。
只输出符合上方 JSON Schema 的 JSON。每条字段都要给 cites，且 cites 只能是 cites_pool 中的 eid（字符串）。

=== ContextPacket (subprotocols) ===
{
  "toc": [
    {
      "section": "4",
      "title": "Flow Control",
      "anchor": "#name-flow-control",
      "order": 16
    },
    {
      "section": "3",
      "title": "Stream States",
      "anchor": "#name-stream-states",
      "order": 10
    }
  ],
  "evidence": [
    {
      "section": "3",
      "title": "Stream States",
      "anchor": "#name-stream-states",
      "evidence": [
        {
          "type": "purpose",
          "text": "3.1.",
          "source": {
            "section": "3",
            "anchor": "#name-stream-states",
            "para": "3-p115",
            "sent_id": "3-p347-s1",
            "eid": "6bae11acc0b882c6"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 2 :",
          "source": {
            "section": "3.1",
            "anchor": "#name-sending-stream-states",
            "para": "3.1-p120",
            "sent_id": "3.1-p366-s1",
            "eid": "43c84775ccedf2b2"
          }
        },
        {
          "type": "purpose",
          "text": "3.2.",
          "source": {
            "section": "3.1",
            "anchor": "#name-sending-stream-states",
            "para": "3.1-p130",
            "sent_id": "3.1-p388-s1",
            "eid": "5a7eb6251d854a32"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 3 :",
          "source": {
            "section": "3.2",
            "anchor": "#name-receiving-stream-states",
            "para": "3.2-p135",
            "sent_id": "3.2-p421-s1",
            "eid": "ae32c8276a2c136c"
          }
        },
        {
          "type": "purpose",
          "text": "3.3.",
          "source": {
            "section": "3.2",
            "anchor": "#name-receiving-stream-states",
            "para": "3.2-p148",
            "sent_id": "3.2-p454-s1",
            "eid": "91a0ac40ccb91384"
          }
        },
        {
          "type": "purpose",
          "text": "3.4.",
          "source": {
            "section": "3.3",
            "anchor": "#name-permitted-frame-types",
            "para": "3.3-p153",
            "sent_id": "3.3-p472-s1",
            "eid": "7956af9d7341b585"
          }
        },
        {
          "type": "purpose",
          "text": "Table 2 :",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p156",
            "sent_id": "3.4-p486-s1",
            "eid": "1ae68e10297be94a"
          }
        },
        {
          "type": "purpose",
          "text": "Note (*1):",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p158",
            "sent_id": "3.4-p490-s1",
            "eid": "f6b8d7ed6d1cb915"
          }
        },
        {
          "type": "purpose",
          "text": "3.5.",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p159",
            "sent_id": "3.4-p492-s1",
            "eid": "db56e224fad13fdb"
          }
        },
        {
          "type": "purpose",
          "text": "4.",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p168",
            "sent_id": "3.5-p516-s1",
            "eid": "10ff7016a716dc06"
          }
        },
        {
          "type": "purpose",
          "text": "STOP_SENDING SHOULD only be sent for a stream that has not ",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p165",
            "sent_id": "3.5-p511-s1",
            "eid": "dba2a58ed6a55832"
          }
        },
        {
          "type": "purpose",
          "text": "The receiver only sends MAX_STREAM_DATA frames in the \"Recv\" state.",
          "source": {
            "section": "3.3",
            "anchor": "#name-permitted-frame-types",
            "para": "3.3-p152",
            "sent_id": "3.3-p468-s1",
            "eid": "2c606f3e6f87c68b"
          }
        },
        {
          "type": "normative",
          "text": "STOP_SENDING is most useful for streams in the \"Recv",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p165",
            "sent_id": "3.5-p512-s2",
            "eid": "30afaaf936b9bd90"
          }
        }
      ]
    },
    {
      "section": "4",
      "title": "Flow Control",
      "anchor": "#name-flow-control",
      "evidence": [
        {
          "type": "purpose",
          "text": "4.1.",
          "source": {
            "section": "4",
            "anchor": "#name-flow-control",
            "para": "4-p172",
            "sent_id": "4-p573-s1",
            "eid": "959a25ce33d23ed1"
          }
        },
        {
          "type": "purpose",
          "text": "4.2.",
          "source": {
            "section": "4.1",
            "anchor": "#name-data-flow-control",
            "para": "4.1-p184",
            "sent_id": "4.1-p604-s1",
            "eid": "e46210c826b1829e"
          }
        },
        {
          "type": "purpose",
          "text": "4.3.",
          "source": {
            "section": "4.2",
            "anchor": "#name-increasing-flow-control-lim",
            "para": "4.2-p191",
            "sent_id": "4.2-p624-s1",
            "eid": "3a8087e388731524"
          }
        },
        {
          "type": "purpose",
          "text": "4.4.",
          "source": {
            "section": "4.3",
            "anchor": "#name-flow-control-performance",
            "para": "4.3-p195",
            "sent_id": "4.3-p633-s1",
            "eid": "cbf79eed9dc9a87c"
          }
        },
        {
          "type": "purpose",
          "text": "4.5.",
          "source": {
            "section": "4.4",
            "anchor": "#name-handling-stream-cancellatio",
            "para": "4.4-p199",
            "sent_id": "4.4-p642-s1",
            "eid": "30ef08461bed847d"
          }
        },
        {
          "type": "purpose",
          "text": "4.6.",
          "source": {
            "section": "4.5",
            "anchor": "#name-stream-final-size",
            "para": "4.5-p205",
            "sent_id": "4.5-p667-s1",
            "eid": "07d05bce9310af27"
          }
        },
        {
          "type": "purpose",
          "text": "5.",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p212",
            "sent_id": "4.6-p695-s1",
            "eid": "c48f6c72b570b511"
          }
        },
        {
          "type": "normative",
          "text": "MAX_STREAMS frames that do not increase the stream limit MUST be ignored. ¶",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p209",
            "sent_id": "4.6-p689-s2",
            "eid": "9905558953016e2d"
          }
        },
        {
          "type": "purpose",
          "text": "Endpoints MUST NOT exceed the limit set by their peer.",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p208",
            "sent_id": "4.6-p686-s1",
            "eid": "b139f149ba17bcb6"
          }
        },
        {
          "type": "purpose",
          "text": "Senders MUST NOT send data in excess of either limit. ¶",
          "source": {
            "section": "4.1",
            "anchor": "#name-data-flow-control",
            "para": "4.1-p176",
            "sent_id": "4.1-p588-s1",
            "eid": "3cd1c90a531aabb0"
          }
        }
      ]
    }
  ],
  "frame_evidence": [],
  "cites_pool": [
    {
      "eid": "6bae11acc0b882c6",
      "section": "3",
      "anchor": "#name-stream-states",
      "para": "3-p115",
      "sent_id": "3-p347-s1"
    },
    {
      "eid": "43c84775ccedf2b2",
      "section": "3.1",
      "anchor": "#name-sending-stream-states",
      "para": "3.1-p120",
      "sent_id": "3.1-p366-s1"
    },
    {
      "eid": "5a7eb6251d854a32",
      "section": "3.1",
      "anchor": "#name-sending-stream-states",
      "para": "3.1-p130",
      "sent_id": "3.1-p388-s1"
    },
    {
      "eid": "ae32c8276a2c136c",
      "section": "3.2",
      "anchor": "#name-receiving-stream-states",
      "para": "3.2-p135",
      "sent_id": "3.2-p421-s1"
    },
    {
      "eid": "91a0ac40ccb91384",
      "section": "3.2",
      "anchor": "#name-receiving-stream-states",
      "para": "3.2-p148",
      "sent_id": "3.2-p454-s1"
    },
    {
      "eid": "7956af9d7341b585",
      "section": "3.3",
      "anchor": "#name-permitted-frame-types",
      "para": "3.3-p153",
      "sent_id": "3.3-p472-s1"
    },
    {
      "eid": "1ae68e10297be94a",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p156",
      "sent_id": "3.4-p486-s1"
    },
    {
      "eid": "f6b8d7ed6d1cb915",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p158",
      "sent_id": "3.4-p490-s1"
    },
    {
      "eid": "db56e224fad13fdb",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p159",
      "sent_id": "3.4-p492-s1"
    },
    {
      "eid": "10ff7016a716dc06",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p168",
      "sent_id": "3.5-p516-s1"
    },
    {
      "eid": "dba2a58ed6a55832",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p165",
      "sent_id": "3.5-p511-s1"
    },
    {
      "eid": "2c606f3e6f87c68b",
      "section": "3.3",
      "anchor": "#name-permitted-frame-types",
      "para": "3.3-p152",
      "sent_id": "3.3-p468-s1"
    },
    {
      "eid": "30afaaf936b9bd90",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p165",
      "sent_id": "3.5-p512-s2"
    },
    {
      "eid": "959a25ce33d23ed1",
      "section": "4",
      "anchor": "#name-flow-control",
      "para": "4-p172",
      "sent_id": "4-p573-s1"
    },
    {
      "eid": "e46210c826b1829e",
      "section": "4.1",
      "anchor": "#name-data-flow-control",
      "para": "4.1-p184",
      "sent_id": "4.1-p604-s1"
    },
    {
      "eid": "3a8087e388731524",
      "section": "4.2",
      "anchor": "#name-increasing-flow-control-lim",
      "para": "4.2-p191",
      "sent_id": "4.2-p624-s1"
    },
    {
      "eid": "cbf79eed9dc9a87c",
      "section": "4.3",
      "anchor": "#name-flow-control-performance",
      "para": "4.3-p195",
      "sent_id": "4.3-p633-s1"
    },
    {
      "eid": "30ef08461bed847d",
      "section": "4.4",
      "anchor": "#name-handling-stream-cancellatio",
      "para": "4.4-p199",
      "sent_id": "4.4-p642-s1"
    },
    {
      "eid": "07d05bce9310af27",
      "section": "4.5",
      "anchor": "#name-stream-final-size",
      "para": "4.5-p205",
      "sent_id": "4.5-p667-s1"
    },
    {
      "eid": "c48f6c72b570b511",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p212",
      "sent_id": "4.6-p695-s1"
    },
    {
      "eid": "9905558953016e2d",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p209",
      "sent_id": "4.6-p689-s2"
    },
    {
      "eid": "b139f149ba17bcb6",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p208",
      "sent_id": "4.6-p686-s1"
    },
    {
      "eid": "3cd1c90a531aabb0",
      "section": "4.1",
      "anchor": "#name-data-flow-control",
      "para": "4.1-p176",
      "sent_id": "4.1-p588-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}

2025-09-25 14:43:08,897 - INFO - subprotocolextractor_eid.py:567 - ----
2025-09-25 14:43:08,899 - INFO - subprotocolextractor_eid.py:568 - Packet Data:
{
  "toc": [
    {
      "section": "4",
      "title": "Flow Control",
      "anchor": "#name-flow-control",
      "order": 16
    },
    {
      "section": "3",
      "title": "Stream States",
      "anchor": "#name-stream-states",
      "order": 10
    }
  ],
  "evidence": [
    {
      "section": "3",
      "title": "Stream States",
      "anchor": "#name-stream-states",
      "evidence": [
        {
          "type": "purpose",
          "text": "3.1.",
          "source": {
            "section": "3",
            "anchor": "#name-stream-states",
            "para": "3-p115",
            "sent_id": "3-p347-s1",
            "eid": "6bae11acc0b882c6"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 2 :",
          "source": {
            "section": "3.1",
            "anchor": "#name-sending-stream-states",
            "para": "3.1-p120",
            "sent_id": "3.1-p366-s1",
            "eid": "43c84775ccedf2b2"
          }
        },
        {
          "type": "purpose",
          "text": "3.2.",
          "source": {
            "section": "3.1",
            "anchor": "#name-sending-stream-states",
            "para": "3.1-p130",
            "sent_id": "3.1-p388-s1",
            "eid": "5a7eb6251d854a32"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 3 :",
          "source": {
            "section": "3.2",
            "anchor": "#name-receiving-stream-states",
            "para": "3.2-p135",
            "sent_id": "3.2-p421-s1",
            "eid": "ae32c8276a2c136c"
          }
        },
        {
          "type": "purpose",
          "text": "3.3.",
          "source": {
            "section": "3.2",
            "anchor": "#name-receiving-stream-states",
            "para": "3.2-p148",
            "sent_id": "3.2-p454-s1",
            "eid": "91a0ac40ccb91384"
          }
        },
        {
          "type": "purpose",
          "text": "3.4.",
          "source": {
            "section": "3.3",
            "anchor": "#name-permitted-frame-types",
            "para": "3.3-p153",
            "sent_id": "3.3-p472-s1",
            "eid": "7956af9d7341b585"
          }
        },
        {
          "type": "purpose",
          "text": "Table 2 :",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p156",
            "sent_id": "3.4-p486-s1",
            "eid": "1ae68e10297be94a"
          }
        },
        {
          "type": "purpose",
          "text": "Note (*1):",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p158",
            "sent_id": "3.4-p490-s1",
            "eid": "f6b8d7ed6d1cb915"
          }
        },
        {
          "type": "purpose",
          "text": "3.5.",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p159",
            "sent_id": "3.4-p492-s1",
            "eid": "db56e224fad13fdb"
          }
        },
        {
          "type": "purpose",
          "text": "4.",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p168",
            "sent_id": "3.5-p516-s1",
            "eid": "10ff7016a716dc06"
          }
        },
        {
          "type": "purpose",
          "text": "STOP_SENDING SHOULD only be sent for a stream that has not ",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p165",
            "sent_id": "3.5-p511-s1",
            "eid": "dba2a58ed6a55832"
          }
        },
        {
          "type": "purpose",
          "text": "The receiver only sends MAX_STREAM_DATA frames in the \"Recv\" state.",
          "source": {
            "section": "3.3",
            "anchor": "#name-permitted-frame-types",
            "para": "3.3-p152",
            "sent_id": "3.3-p468-s1",
            "eid": "2c606f3e6f87c68b"
          }
        },
        {
          "type": "normative",
          "text": "STOP_SENDING is most useful for streams in the \"Recv",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p165",
            "sent_id": "3.5-p512-s2",
            "eid": "30afaaf936b9bd90"
          }
        }
      ]
    },
    {
      "section": "4",
      "title": "Flow Control",
      "anchor": "#name-flow-control",
      "evidence": [
        {
          "type": "purpose",
          "text": "4.1.",
          "source": {
            "section": "4",
            "anchor": "#name-flow-control",
            "para": "4-p172",
            "sent_id": "4-p573-s1",
            "eid": "959a25ce33d23ed1"
          }
        },
        {
          "type": "purpose",
          "text": "4.2.",
          "source": {
            "section": "4.1",
            "anchor": "#name-data-flow-control",
            "para": "4.1-p184",
            "sent_id": "4.1-p604-s1",
            "eid": "e46210c826b1829e"
          }
        },
        {
          "type": "purpose",
          "text": "4.3.",
          "source": {
            "section": "4.2",
            "anchor": "#name-increasing-flow-control-lim",
            "para": "4.2-p191",
            "sent_id": "4.2-p624-s1",
            "eid": "3a8087e388731524"
          }
        },
        {
          "type": "purpose",
          "text": "4.4.",
          "source": {
            "section": "4.3",
            "anchor": "#name-flow-control-performance",
            "para": "4.3-p195",
            "sent_id": "4.3-p633-s1",
            "eid": "cbf79eed9dc9a87c"
          }
        },
        {
          "type": "purpose",
          "text": "4.5.",
          "source": {
            "section": "4.4",
            "anchor": "#name-handling-stream-cancellatio",
            "para": "4.4-p199",
            "sent_id": "4.4-p642-s1",
            "eid": "30ef08461bed847d"
          }
        },
        {
          "type": "purpose",
          "text": "4.6.",
          "source": {
            "section": "4.5",
            "anchor": "#name-stream-final-size",
            "para": "4.5-p205",
            "sent_id": "4.5-p667-s1",
            "eid": "07d05bce9310af27"
          }
        },
        {
          "type": "purpose",
          "text": "5.",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p212",
            "sent_id": "4.6-p695-s1",
            "eid": "c48f6c72b570b511"
          }
        },
        {
          "type": "normative",
          "text": "MAX_STREAMS frames that do not increase the stream limit MUST be ignored. ¶",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p209",
            "sent_id": "4.6-p689-s2",
            "eid": "9905558953016e2d"
          }
        },
        {
          "type": "purpose",
          "text": "Endpoints MUST NOT exceed the limit set by their peer.",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p208",
            "sent_id": "4.6-p686-s1",
            "eid": "b139f149ba17bcb6"
          }
        },
        {
          "type": "purpose",
          "text": "Senders MUST NOT send data in excess of either limit. ¶",
          "source": {
            "section": "4.1",
            "anchor": "#name-data-flow-control",
            "para": "4.1-p176",
            "sent_id": "4.1-p588-s1",
            "eid": "3cd1c90a531aabb0"
          }
        }
      ]
    }
  ],
  "frame_evidence": [],
  "cites_pool": [
    {
      "eid": "6bae11acc0b882c6",
      "section": "3",
      "anchor": "#name-stream-states",
      "para": "3-p115",
      "sent_id": "3-p347-s1"
    },
    {
      "eid": "43c84775ccedf2b2",
      "section": "3.1",
      "anchor": "#name-sending-stream-states",
      "para": "3.1-p120",
      "sent_id": "3.1-p366-s1"
    },
    {
      "eid": "5a7eb6251d854a32",
      "section": "3.1",
      "anchor": "#name-sending-stream-states",
      "para": "3.1-p130",
      "sent_id": "3.1-p388-s1"
    },
    {
      "eid": "ae32c8276a2c136c",
      "section": "3.2",
      "anchor": "#name-receiving-stream-states",
      "para": "3.2-p135",
      "sent_id": "3.2-p421-s1"
    },
    {
      "eid": "91a0ac40ccb91384",
      "section": "3.2",
      "anchor": "#name-receiving-stream-states",
      "para": "3.2-p148",
      "sent_id": "3.2-p454-s1"
    },
    {
      "eid": "7956af9d7341b585",
      "section": "3.3",
      "anchor": "#name-permitted-frame-types",
      "para": "3.3-p153",
      "sent_id": "3.3-p472-s1"
    },
    {
      "eid": "1ae68e10297be94a",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p156",
      "sent_id": "3.4-p486-s1"
    },
    {
      "eid": "f6b8d7ed6d1cb915",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p158",
      "sent_id": "3.4-p490-s1"
    },
    {
      "eid": "db56e224fad13fdb",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p159",
      "sent_id": "3.4-p492-s1"
    },
    {
      "eid": "10ff7016a716dc06",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p168",
      "sent_id": "3.5-p516-s1"
    },
    {
      "eid": "dba2a58ed6a55832",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p165",
      "sent_id": "3.5-p511-s1"
    },
    {
      "eid": "2c606f3e6f87c68b",
      "section": "3.3",
      "anchor": "#name-permitted-frame-types",
      "para": "3.3-p152",
      "sent_id": "3.3-p468-s1"
    },
    {
      "eid": "30afaaf936b9bd90",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p165",
      "sent_id": "3.5-p512-s2"
    },
    {
      "eid": "959a25ce33d23ed1",
      "section": "4",
      "anchor": "#name-flow-control",
      "para": "4-p172",
      "sent_id": "4-p573-s1"
    },
    {
      "eid": "e46210c826b1829e",
      "section": "4.1",
      "anchor": "#name-data-flow-control",
      "para": "4.1-p184",
      "sent_id": "4.1-p604-s1"
    },
    {
      "eid": "3a8087e388731524",
      "section": "4.2",
      "anchor": "#name-increasing-flow-control-lim",
      "para": "4.2-p191",
      "sent_id": "4.2-p624-s1"
    },
    {
      "eid": "cbf79eed9dc9a87c",
      "section": "4.3",
      "anchor": "#name-flow-control-performance",
      "para": "4.3-p195",
      "sent_id": "4.3-p633-s1"
    },
    {
      "eid": "30ef08461bed847d",
      "section": "4.4",
      "anchor": "#name-handling-stream-cancellatio",
      "para": "4.4-p199",
      "sent_id": "4.4-p642-s1"
    },
    {
      "eid": "07d05bce9310af27",
      "section": "4.5",
      "anchor": "#name-stream-final-size",
      "para": "4.5-p205",
      "sent_id": "4.5-p667-s1"
    },
    {
      "eid": "c48f6c72b570b511",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p212",
      "sent_id": "4.6-p695-s1"
    },
    {
      "eid": "9905558953016e2d",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p209",
      "sent_id": "4.6-p689-s2"
    },
    {
      "eid": "b139f149ba17bcb6",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p208",
      "sent_id": "4.6-p686-s1"
    },
    {
      "eid": "3cd1c90a531aabb0",
      "section": "4.1",
      "anchor": "#name-data-flow-control",
      "para": "4.1-p176",
      "sent_id": "4.1-p588-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}
2025-09-25 14:43:08,913 - INFO - subprotocolextractor_eid.py:569 - ====end prompt====
2025-09-25 14:43:13,619 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 14:43:13,623 - INFO - subprotocolextractor_eid.py:579 - [Shard 3] 收到结果 940 chars
2025-09-25 14:43:13,762 - INFO - subprotocolextractor_eid.py:600 - 已保存：D:\ProtocolAutoModel-main\output\agents\subprotocol\QUIC_subprotocols_gpt-4o_make_eid.json
2025-09-25 14:46:12,909 - INFO - subprotocolextractor.py:49 - 日志初始化：subprotocol_prompt.log
2025-09-25 14:46:13,000 - INFO - subprotocolextractor.py:367 - 启动时间：2025-09-25 14:46:13 CST
2025-09-25 14:46:14,013 - INFO - subprotocolextractor.py:389 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-25 14:46:14,509 - INFO - subprotocolextractor.py:406 - 模板基线 tokens ≈ 715
2025-09-25 14:46:14,543 - INFO - subprotocolextractor.py:410 - 分片数：1
2025-09-25 14:46:14,553 - WARNING - subprotocolextractor.py:424 - [Shard 1] 超预算，启动二次裁剪 evidence…
2025-09-25 14:46:14,600 - INFO - subprotocolextractor.py:441 - [Shard 1] 发送 tokens≈6444
2025-09-25 14:46:27,112 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 14:46:27,389 - INFO - subprotocolextractor.py:449 - [Shard 1] 收到结果 2620 chars
2025-09-25 14:46:27,394 - INFO - subprotocolextractor.py:459 - 仅有一片草案，无需合并。已保存：D:\ProtocolAutoModel-main\output\agents\QUIC_subprotocols_gpt-4o_developpromptchange.json
2025-09-25 15:10:57,449 - INFO - subprotocolextractor.py:49 - 日志初始化：subprotocol_prompt.log
2025-09-25 15:10:57,542 - INFO - subprotocolextractor.py:367 - 启动时间：2025-09-25 15:10:57 CST
2025-09-25 15:10:58,557 - INFO - subprotocolextractor.py:389 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-25 15:10:59,065 - INFO - subprotocolextractor.py:406 - 模板基线 tokens ≈ 715
2025-09-25 15:10:59,099 - INFO - subprotocolextractor.py:410 - 分片数：1
2025-09-25 15:10:59,110 - WARNING - subprotocolextractor.py:424 - [Shard 1] 超预算，启动二次裁剪 evidence…
2025-09-25 15:10:59,160 - INFO - subprotocolextractor.py:441 - [Shard 1] 发送 tokens≈6444
2025-09-25 15:11:09,578 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 15:11:09,694 - INFO - subprotocolextractor.py:449 - [Shard 1] 收到结果 1639 chars
2025-09-25 15:11:09,695 - INFO - subprotocolextractor.py:459 - 仅有一片草案，无需合并。已保存：D:\ProtocolAutoModel-main\output\agents\QUIC_subprotocols_gpt-4o_developpromptchange.json
2025-09-25 15:23:42,138 - INFO - subprotocolextractor.py:49 - 日志初始化：subprotocol_prompt.log
2025-09-25 15:23:42,205 - INFO - subprotocolextractor.py:367 - 启动时间：2025-09-25 15:23:42 CST
2025-09-25 15:23:43,180 - INFO - subprotocolextractor.py:389 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-25 15:23:43,691 - INFO - subprotocolextractor.py:406 - 模板基线 tokens ≈ 715
2025-09-25 15:23:43,725 - INFO - subprotocolextractor.py:410 - 分片数：1
2025-09-25 15:23:43,735 - WARNING - subprotocolextractor.py:424 - [Shard 1] 超预算，启动二次裁剪 evidence…
2025-09-25 15:23:43,784 - INFO - subprotocolextractor.py:441 - [Shard 1] 发送 tokens≈6444
2025-09-25 15:23:52,584 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 15:23:52,628 - INFO - subprotocolextractor.py:449 - [Shard 1] 收到结果 1659 chars
2025-09-25 15:23:52,633 - INFO - subprotocolextractor.py:459 - 仅有一片草案，无需合并。已保存：D:\ProtocolAutoModel-main\output\agents\QUIC_subprotocols_gpt-4o_developpromptchange.json
2025-09-25 15:23:59,667 - INFO - subprotocolextractor_eid.py:57 - 日志初始化：subprotocol_prompt.log
2025-09-25 15:23:59,713 - INFO - subprotocolextractor_eid.py:485 - 启动时间：2025-09-25 15:23:59 CST
2025-09-25 15:24:00,692 - INFO - subprotocolextractor_eid.py:507 - MODEL=gpt-4o, MAX_INPUT=8192, HARD_CAP=7168, MAX_OUTPUT_TOKENS=1024
2025-09-25 15:24:01,215 - INFO - subprotocolextractor_eid.py:524 - 模板基线 tokens ≈ 711
2025-09-25 15:24:01,264 - INFO - subprotocolextractor_eid.py:528 - 分片数：3
2025-09-25 15:24:01,271 - INFO - subprotocolextractor_eid.py:558 - [Shard 1] 发送 tokens≈6941
2025-09-25 15:24:01,271 - INFO - subprotocolextractor_eid.py:561 - ====prompt====
2025-09-25 15:24:01,271 - INFO - subprotocolextractor_eid.py:562 - System Prompt:
你是“协议规范编译器”。任务：仅依据提供的 RFC 证据（含章节号与锚点），
把 QUIC (RFC 9000) 的主要子协议划分出来，并给出用途、关键帧、依赖与边界。
铁规：
1) 仅使用输入 evidence；禁止外部知识或猜测。
2) 每条结论必须给 cites（引用 eid，来自 cites_pool）。
3) 允许内部推理，但最终只输出 JSON；不得输出推理过程。
4) 术语统一：client≈initiator，server≈responder，endpoint≈peer；帧名保持全大写。
5) 模态优先级：MUST/SHALL > SHOULD/RECOMMENDED > MAY/OPTIONAL；冲突时偏向强模态。
6) 证据不足时，输出 open_questions[] 指明缺口与应补小节/帧。
7) 严格符合 JSON Schema，勿添加未定义字段。
2025-09-25 15:24:01,272 - INFO - subprotocolextractor_eid.py:563 - ----
2025-09-25 15:24:01,272 - INFO - subprotocolextractor_eid.py:564 - Developer Prompt:
【工作流】
A. 候选模块：从 toc + evidence 导言/目的/规范句中归纳主要子协议（Streams、Flow Control、Connection Management/Migration、Connection-level 传输、Connection Closure 等，前提是有证据）。
B. purpose：用导言/目的句凝练（≤200字符），附 1–3 条 cites。
C. 边界与依赖：boundaries.includes（小节号集合）、excludes（明确不含主题，如 RFC9001/9002）；depends_on（如 Streams 依赖 Flow Control）。
D. key_frames：把与该模块相关的帧名（仅名称）列出；证据可来自 §19.* 的帧定义或正文提及。
E. 覆盖检查：若 frame_evidence 里有帧未被任何模块收录，加入 open_questions。
F. cites 必须是**字符串数组**，且只能取自 cites_pool.eid。禁止使用 section/anchor 文本；禁止自造 eid。
【输出 JSON Schema】
{
  "type":"object",
  "required":["subprotocols","open_questions"],
  "properties":{
    "subprotocols":{"type":"array","items":{
      "type":"object",
      "required":["name","purpose","key_frames","depends_on","boundaries","cites"],
      "properties":{
        "name":{"type":"string"},
        "purpose":{"type":"string","maxLength":200},
        "key_frames":{"type":"array","items":{"type":"string"}},
        "depends_on":{"type":"array","items":{"type":"string"}},
        "boundaries":{"type":"object","properties":{
          "includes":{"type":"array","items":{"type":"string"}},
          "excludes":{"type":"array","items":{"type":"string"}}
        }},
        "cites":{"type":"array","items":{"type":"string"}}
      }
    }},
    "open_questions":{"type":"array","items":{
      "type":"object",
      "required":["ask"],
      "properties":{
        "ask":{"type":"string"},
        "related_frames":{"type":"array","items":{"type":"string"}},
        "wanted_sections":{"type":"array","items":{"type":"string"}}
      }
    }}
  }
}
2025-09-25 15:24:01,273 - INFO - subprotocolextractor_eid.py:565 - ----
2025-09-25 15:24:01,273 - INFO - subprotocolextractor_eid.py:566 - User Prompt:
任务：在 RFC 证据范围内，抽取‘主要子协议/主要部分’用于后续选择建模范围。
只输出符合上方 JSON Schema 的 JSON。每条字段都要给 cites，且 cites 只能是 cites_pool 中的 eid（字符串）。

=== ContextPacket (subprotocols) ===
{
  "toc": [
    {
      "section": "2",
      "title": "Streams",
      "anchor": "#name-streams",
      "order": 5
    },
    {
      "section": "20",
      "title": "Error Codes",
      "anchor": "#name-error-codes",
      "order": 160
    },
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "order": 136
    }
  ],
  "evidence": [
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "evidence": [
        {
          "type": "normative",
          "text": "STREAM Frame Format",
          "source": {
            "section": "19.8",
            "anchor": "#name-stream-frames",
            "para": "19.8-p1232",
            "sent_id": "19.8-p5695-s2",
            "eid": "720f215781e79bdc"
          }
        },
        {
          "type": "normative",
          "text": "MAX_DATA Frame Format",
          "source": {
            "section": "19.9",
            "anchor": "#name-max_data-frames",
            "para": "19.9-p1246",
            "sent_id": "19.9-p5723-s2",
            "eid": "81baac9031ce4264"
          }
        },
        {
          "type": "purpose",
          "text": "19.1.",
          "source": {
            "section": "19",
            "anchor": "#name-frame-types-and-formats",
            "para": "19-p1109",
            "sent_id": "19-p5395-s1",
            "eid": "f408addcf636faa7"
          }
        },
        {
          "type": "purpose",
          "text": "19.2.",
          "source": {
            "section": "19.1",
            "anchor": "#name-padding-frames",
            "para": "19.1-p1116",
            "sent_id": "19.1-p5412-s1",
            "eid": "af4b7463b751bc3e"
          }
        },
        {
          "type": "purpose",
          "text": "19.3.",
          "source": {
            "section": "19.2",
            "anchor": "#name-ping-frames",
            "para": "19.2-p1125",
            "sent_id": "19.2-p5425-s1",
            "eid": "0a17e44f8aa704f5"
          }
        },
        {
          "type": "normative",
          "text": "ACK Ranges",
          "source": {
            "section": "19.3.1",
            "anchor": "#name-ack-ranges",
            "para": "19.3.1-p1145",
            "sent_id": "19.3.1-p5512-s2",
            "eid": "d01360fa5fb7194e"
          }
        },
        {
          "type": "purpose",
          "text": "19.4.",
          "source": {
            "section": "19.3.2",
            "anchor": "#name-ecn-counts",
            "para": "19.3.2-p1175",
            "sent_id": "19.3.2-p5557-s1",
            "eid": "c0710ea8039271cd"
          }
        },
        {
          "type": "purpose",
          "text": "19.5.",
          "source": {
            "section": "19.4",
            "anchor": "#name-reset_stream-frames",
            "para": "19.4-p1188",
            "sent_id": "19.4-p5579-s1",
            "eid": "247207e2d4d98538"
          }
        },
        {
          "type": "purpose",
          "text": "19.6.",
          "source": {
            "section": "19.5",
            "anchor": "#name-stop_sending-frames",
            "para": "19.5-p1199",
            "sent_id": "19.5-p5602-s1",
            "eid": "4c66d2e99129f7a7"
          }
        },
        {
          "type": "purpose",
          "text": "19.7.",
          "source": {
            "section": "19.6",
            "anchor": "#name-crypto-frames",
            "para": "19.6-p1213",
            "sent_id": "19.6-p5635-s1",
            "eid": "9dd2d98a33191cfa"
          }
        },
        {
          "type": "purpose",
          "text": "19.8.",
          "source": {
            "section": "19.7",
            "anchor": "#name-new_token-frames",
            "para": "19.7-p1225",
            "sent_id": "19.7-p5661-s1",
            "eid": "34729c7b174611d2"
          }
        },
        {
          "type": "purpose",
          "text": "19.9.",
          "source": {
            "section": "19.8",
            "anchor": "#name-stream-frames",
            "para": "19.8-p1243",
            "sent_id": "19.8-p5713-s1",
            "eid": "33c1677cbe79c05d"
          }
        },
        {
          "type": "purpose",
          "text": "19.10.",
          "source": {
            "section": "19.9",
            "anchor": "#name-max_data-frames",
            "para": "19.9-p1253",
            "sent_id": "19.9-p5734-s1",
            "eid": "592673a212421afc"
          }
        },
        {
          "type": "purpose",
          "text": "19.11.",
          "source": {
            "section": "19.10",
            "anchor": "#name-max_stream_data-frames",
            "para": "19.10-p1266",
            "sent_id": "19.10-p5765-s1",
            "eid": "5c86d707b66dfe32"
          }
        },
        {
          "type": "purpose",
          "text": "19.12.",
          "source": {
            "section": "19.11",
            "anchor": "#name-max_streams-frames",
            "para": "19.11-p1278",
            "sent_id": "19.11-p5798-s1",
            "eid": "375ccbdc717d73b2"
          }
        },
        {
          "type": "purpose",
          "text": "19.13.",
          "source": {
            "section": "19.12",
            "anchor": "#name-data_blocked-frames",
            "para": "19.12-p1287",
            "sent_id": "19.12-p5814-s1",
            "eid": "ff1fbcf3f9d7e6e9"
          }
        },
        {
          "type": "purpose",
          "text": "19.14.",
          "source": {
            "section": "19.13",
            "anchor": "#name-stream_data_blocked-frames",
            "para": "19.13-p1298",
            "sent_id": "19.13-p5833-s1",
            "eid": "276184cacaadc30c"
          }
        },
        {
          "type": "purpose",
          "text": "19.15.",
          "source": {
            "section": "19.14",
            "anchor": "#name-streams_blocked-frames",
            "para": "19.14-p1308",
            "sent_id": "19.14-p5854-s1",
            "eid": "02adb5fd8711e71f"
          }
        },
        {
          "type": "purpose",
          "text": "19.16.",
          "source": {
            "section": "19.15",
            "anchor": "#name-new_connection_id-frames",
            "para": "19.15-p1327",
            "sent_id": "19.15-p5898-s1",
            "eid": "9a08d9a5ba731949"
          }
        },
        {
          "type": "purpose",
          "text": "19.17.",
          "source": {
            "section": "19.16",
            "anchor": "#name-retire_connection_id-frames",
            "para": "19.16-p1340",
            "sent_id": "19.16-p5926-s1",
            "eid": "2bbfe46e3d7f2615"
          }
        }
      ]
    },
    {
      "section": "2",
      "title": "Streams",
      "anchor": "#name-streams",
      "evidence": [
        {
          "type": "purpose",
          "text": "2.1.",
          "source": {
            "section": "2",
            "anchor": "#name-streams",
            "para": "2-p80",
            "sent_id": "2-p191-s1",
            "eid": "2c351a2721df3672"
          }
        },
        {
          "type": "purpose",
          "text": "Table 1 :",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p86",
            "sent_id": "2.1-p212-s1",
            "eid": "db17a884fc78ebc4"
          }
        },
        {
          "type": "purpose",
          "text": "2.2.",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p89",
            "sent_id": "2.1-p218-s1",
            "eid": "209a0e402cab0ae6"
          }
        },
        {
          "type": "purpose",
          "text": "2.3.",
          "source": {
            "section": "2.2",
            "anchor": "#name-sending-and-receiving-data",
            "para": "2.2-p96",
            "sent_id": "2.2-p240-s1",
            "eid": "2a4711c9b6182f2b"
          }
        },
        {
          "type": "purpose",
          "text": "2.4.",
          "source": {
            "section": "2.3",
            "anchor": "#name-stream-prioritization",
            "para": "2.3-p100",
            "sent_id": "2.3-p249-s1",
            "eid": "a12cfaf7dc718b61"
          }
        },
        {
          "type": "purpose",
          "text": "3.",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p110",
            "sent_id": "2.4-p264-s1",
            "eid": "baf4be69c579030f"
          }
        },
        {
          "type": "purpose",
          "text": "read data; and ¶",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p107",
            "sent_id": "2.4-p261-s1",
            "eid": "6953fc437d625b46"
          }
        },
        {
          "type": "normative",
          "text": "An endpoint that receives a STOP_SENDING frame MUST send a RESET_STREAM frame if the stream is in the \"Ready\" or \"Send\" state.",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p110",
            "sent_id": "2.4-p328-s65",
            "eid": "1a698e4d5b5c58fd"
          }
        },
        {
          "type": "normative",
          "text": "A QUIC endpoint MUST NOT reuse a stream ID within a connection. ",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p82",
            "sent_id": "2.1-p207-s4",
            "eid": "0a3e79b7581d7156"
          }
        }
      ]
    },
    {
      "section": "20",
      "title": "Error Codes",
      "anchor": "#name-error-codes",
      "evidence": [
        {
          "type": "purpose",
          "text": "20.1.",
          "source": {
            "section": "20",
            "anchor": "#name-error-codes",
            "para": "20-p1389",
            "sent_id": "20-p6067-s1",
            "eid": "a7ea2fe72e57db06"
          }
        },
        {
          "type": "purpose",
          "text": "20.2.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1411",
            "sent_id": "20.1-p6124-s1",
            "eid": "d3edee5a4e1cb8e3"
          }
        },
        {
          "type": "purpose",
          "text": "21.",
          "source": {
            "section": "20.2",
            "anchor": "#name-application-protocol-error-",
            "para": "20.2-p1413",
            "sent_id": "20.2-p6129-s1",
            "eid": "72ea4e567307104f"
          }
        },
        {
          "type": "purpose",
          "text": "The cryptographic handshake failed.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1408",
            "sent_id": "20.1-p6115-s1",
            "eid": "f376d3877194e7f6"
          }
        },
        {
          "type": "purpose",
          "text": "The server refused to accept a new connection. ¶",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1393",
            "sent_id": "20.1-p6099-s1",
            "eid": "aef4108619995378"
          }
        },
        {
          "type": "purpose",
          "text": "See Section 22.5 for details on registering new error codes. ¶",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1409",
            "sent_id": "20.1-p6118-s1",
            "eid": "3c15ff58365d10fb"
          }
        },
        {
          "type": "purpose",
          "text": "In defining these error codes, several principles are applied.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1410",
            "sent_id": "20.1-p6119-s1",
            "eid": "9ea30f9be7ac24c6"
          }
        }
      ]
    }
  ],
  "frame_evidence": [
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "frames": [
        "DATA_BLOCKED",
        "MAX_DATA",
        "MAX_STREAMS",
        "MAX_STREAM_DATA",
        "RESET_STREAM",
        "STOP_SENDING",
        "STREAM",
        "STREAMS_BLOCKED",
        "STREAM_DATA_BLOCKED"
      ]
    }
  ],
  "cites_pool": [
    {
      "eid": "720f215781e79bdc",
      "section": "19.8",
      "anchor": "#name-stream-frames",
      "para": "19.8-p1232",
      "sent_id": "19.8-p5695-s2"
    },
    {
      "eid": "81baac9031ce4264",
      "section": "19.9",
      "anchor": "#name-max_data-frames",
      "para": "19.9-p1246",
      "sent_id": "19.9-p5723-s2"
    },
    {
      "eid": "f408addcf636faa7",
      "section": "19",
      "anchor": "#name-frame-types-and-formats",
      "para": "19-p1109",
      "sent_id": "19-p5395-s1"
    },
    {
      "eid": "af4b7463b751bc3e",
      "section": "19.1",
      "anchor": "#name-padding-frames",
      "para": "19.1-p1116",
      "sent_id": "19.1-p5412-s1"
    },
    {
      "eid": "0a17e44f8aa704f5",
      "section": "19.2",
      "anchor": "#name-ping-frames",
      "para": "19.2-p1125",
      "sent_id": "19.2-p5425-s1"
    },
    {
      "eid": "d01360fa5fb7194e",
      "section": "19.3.1",
      "anchor": "#name-ack-ranges",
      "para": "19.3.1-p1145",
      "sent_id": "19.3.1-p5512-s2"
    },
    {
      "eid": "c0710ea8039271cd",
      "section": "19.3.2",
      "anchor": "#name-ecn-counts",
      "para": "19.3.2-p1175",
      "sent_id": "19.3.2-p5557-s1"
    },
    {
      "eid": "247207e2d4d98538",
      "section": "19.4",
      "anchor": "#name-reset_stream-frames",
      "para": "19.4-p1188",
      "sent_id": "19.4-p5579-s1"
    },
    {
      "eid": "4c66d2e99129f7a7",
      "section": "19.5",
      "anchor": "#name-stop_sending-frames",
      "para": "19.5-p1199",
      "sent_id": "19.5-p5602-s1"
    },
    {
      "eid": "9dd2d98a33191cfa",
      "section": "19.6",
      "anchor": "#name-crypto-frames",
      "para": "19.6-p1213",
      "sent_id": "19.6-p5635-s1"
    },
    {
      "eid": "34729c7b174611d2",
      "section": "19.7",
      "anchor": "#name-new_token-frames",
      "para": "19.7-p1225",
      "sent_id": "19.7-p5661-s1"
    },
    {
      "eid": "33c1677cbe79c05d",
      "section": "19.8",
      "anchor": "#name-stream-frames",
      "para": "19.8-p1243",
      "sent_id": "19.8-p5713-s1"
    },
    {
      "eid": "592673a212421afc",
      "section": "19.9",
      "anchor": "#name-max_data-frames",
      "para": "19.9-p1253",
      "sent_id": "19.9-p5734-s1"
    },
    {
      "eid": "5c86d707b66dfe32",
      "section": "19.10",
      "anchor": "#name-max_stream_data-frames",
      "para": "19.10-p1266",
      "sent_id": "19.10-p5765-s1"
    },
    {
      "eid": "375ccbdc717d73b2",
      "section": "19.11",
      "anchor": "#name-max_streams-frames",
      "para": "19.11-p1278",
      "sent_id": "19.11-p5798-s1"
    },
    {
      "eid": "ff1fbcf3f9d7e6e9",
      "section": "19.12",
      "anchor": "#name-data_blocked-frames",
      "para": "19.12-p1287",
      "sent_id": "19.12-p5814-s1"
    },
    {
      "eid": "276184cacaadc30c",
      "section": "19.13",
      "anchor": "#name-stream_data_blocked-frames",
      "para": "19.13-p1298",
      "sent_id": "19.13-p5833-s1"
    },
    {
      "eid": "02adb5fd8711e71f",
      "section": "19.14",
      "anchor": "#name-streams_blocked-frames",
      "para": "19.14-p1308",
      "sent_id": "19.14-p5854-s1"
    },
    {
      "eid": "9a08d9a5ba731949",
      "section": "19.15",
      "anchor": "#name-new_connection_id-frames",
      "para": "19.15-p1327",
      "sent_id": "19.15-p5898-s1"
    },
    {
      "eid": "2bbfe46e3d7f2615",
      "section": "19.16",
      "anchor": "#name-retire_connection_id-frames",
      "para": "19.16-p1340",
      "sent_id": "19.16-p5926-s1"
    },
    {
      "eid": "2c351a2721df3672",
      "section": "2",
      "anchor": "#name-streams",
      "para": "2-p80",
      "sent_id": "2-p191-s1"
    },
    {
      "eid": "db17a884fc78ebc4",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p86",
      "sent_id": "2.1-p212-s1"
    },
    {
      "eid": "209a0e402cab0ae6",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p89",
      "sent_id": "2.1-p218-s1"
    },
    {
      "eid": "2a4711c9b6182f2b",
      "section": "2.2",
      "anchor": "#name-sending-and-receiving-data",
      "para": "2.2-p96",
      "sent_id": "2.2-p240-s1"
    },
    {
      "eid": "a12cfaf7dc718b61",
      "section": "2.3",
      "anchor": "#name-stream-prioritization",
      "para": "2.3-p100",
      "sent_id": "2.3-p249-s1"
    },
    {
      "eid": "baf4be69c579030f",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p110",
      "sent_id": "2.4-p264-s1"
    },
    {
      "eid": "6953fc437d625b46",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p107",
      "sent_id": "2.4-p261-s1"
    },
    {
      "eid": "1a698e4d5b5c58fd",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p110",
      "sent_id": "2.4-p328-s65"
    },
    {
      "eid": "0a3e79b7581d7156",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p82",
      "sent_id": "2.1-p207-s4"
    },
    {
      "eid": "a7ea2fe72e57db06",
      "section": "20",
      "anchor": "#name-error-codes",
      "para": "20-p1389",
      "sent_id": "20-p6067-s1"
    },
    {
      "eid": "d3edee5a4e1cb8e3",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1411",
      "sent_id": "20.1-p6124-s1"
    },
    {
      "eid": "72ea4e567307104f",
      "section": "20.2",
      "anchor": "#name-application-protocol-error-",
      "para": "20.2-p1413",
      "sent_id": "20.2-p6129-s1"
    },
    {
      "eid": "f376d3877194e7f6",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1408",
      "sent_id": "20.1-p6115-s1"
    },
    {
      "eid": "aef4108619995378",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1393",
      "sent_id": "20.1-p6099-s1"
    },
    {
      "eid": "3c15ff58365d10fb",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1409",
      "sent_id": "20.1-p6118-s1"
    },
    {
      "eid": "9ea30f9be7ac24c6",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1410",
      "sent_id": "20.1-p6119-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}

2025-09-25 15:24:01,278 - INFO - subprotocolextractor_eid.py:567 - ----
2025-09-25 15:24:01,279 - INFO - subprotocolextractor_eid.py:568 - Packet Data:
{
  "toc": [
    {
      "section": "2",
      "title": "Streams",
      "anchor": "#name-streams",
      "order": 5
    },
    {
      "section": "20",
      "title": "Error Codes",
      "anchor": "#name-error-codes",
      "order": 160
    },
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "order": 136
    }
  ],
  "evidence": [
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "evidence": [
        {
          "type": "normative",
          "text": "STREAM Frame Format",
          "source": {
            "section": "19.8",
            "anchor": "#name-stream-frames",
            "para": "19.8-p1232",
            "sent_id": "19.8-p5695-s2",
            "eid": "720f215781e79bdc"
          }
        },
        {
          "type": "normative",
          "text": "MAX_DATA Frame Format",
          "source": {
            "section": "19.9",
            "anchor": "#name-max_data-frames",
            "para": "19.9-p1246",
            "sent_id": "19.9-p5723-s2",
            "eid": "81baac9031ce4264"
          }
        },
        {
          "type": "purpose",
          "text": "19.1.",
          "source": {
            "section": "19",
            "anchor": "#name-frame-types-and-formats",
            "para": "19-p1109",
            "sent_id": "19-p5395-s1",
            "eid": "f408addcf636faa7"
          }
        },
        {
          "type": "purpose",
          "text": "19.2.",
          "source": {
            "section": "19.1",
            "anchor": "#name-padding-frames",
            "para": "19.1-p1116",
            "sent_id": "19.1-p5412-s1",
            "eid": "af4b7463b751bc3e"
          }
        },
        {
          "type": "purpose",
          "text": "19.3.",
          "source": {
            "section": "19.2",
            "anchor": "#name-ping-frames",
            "para": "19.2-p1125",
            "sent_id": "19.2-p5425-s1",
            "eid": "0a17e44f8aa704f5"
          }
        },
        {
          "type": "normative",
          "text": "ACK Ranges",
          "source": {
            "section": "19.3.1",
            "anchor": "#name-ack-ranges",
            "para": "19.3.1-p1145",
            "sent_id": "19.3.1-p5512-s2",
            "eid": "d01360fa5fb7194e"
          }
        },
        {
          "type": "purpose",
          "text": "19.4.",
          "source": {
            "section": "19.3.2",
            "anchor": "#name-ecn-counts",
            "para": "19.3.2-p1175",
            "sent_id": "19.3.2-p5557-s1",
            "eid": "c0710ea8039271cd"
          }
        },
        {
          "type": "purpose",
          "text": "19.5.",
          "source": {
            "section": "19.4",
            "anchor": "#name-reset_stream-frames",
            "para": "19.4-p1188",
            "sent_id": "19.4-p5579-s1",
            "eid": "247207e2d4d98538"
          }
        },
        {
          "type": "purpose",
          "text": "19.6.",
          "source": {
            "section": "19.5",
            "anchor": "#name-stop_sending-frames",
            "para": "19.5-p1199",
            "sent_id": "19.5-p5602-s1",
            "eid": "4c66d2e99129f7a7"
          }
        },
        {
          "type": "purpose",
          "text": "19.7.",
          "source": {
            "section": "19.6",
            "anchor": "#name-crypto-frames",
            "para": "19.6-p1213",
            "sent_id": "19.6-p5635-s1",
            "eid": "9dd2d98a33191cfa"
          }
        },
        {
          "type": "purpose",
          "text": "19.8.",
          "source": {
            "section": "19.7",
            "anchor": "#name-new_token-frames",
            "para": "19.7-p1225",
            "sent_id": "19.7-p5661-s1",
            "eid": "34729c7b174611d2"
          }
        },
        {
          "type": "purpose",
          "text": "19.9.",
          "source": {
            "section": "19.8",
            "anchor": "#name-stream-frames",
            "para": "19.8-p1243",
            "sent_id": "19.8-p5713-s1",
            "eid": "33c1677cbe79c05d"
          }
        },
        {
          "type": "purpose",
          "text": "19.10.",
          "source": {
            "section": "19.9",
            "anchor": "#name-max_data-frames",
            "para": "19.9-p1253",
            "sent_id": "19.9-p5734-s1",
            "eid": "592673a212421afc"
          }
        },
        {
          "type": "purpose",
          "text": "19.11.",
          "source": {
            "section": "19.10",
            "anchor": "#name-max_stream_data-frames",
            "para": "19.10-p1266",
            "sent_id": "19.10-p5765-s1",
            "eid": "5c86d707b66dfe32"
          }
        },
        {
          "type": "purpose",
          "text": "19.12.",
          "source": {
            "section": "19.11",
            "anchor": "#name-max_streams-frames",
            "para": "19.11-p1278",
            "sent_id": "19.11-p5798-s1",
            "eid": "375ccbdc717d73b2"
          }
        },
        {
          "type": "purpose",
          "text": "19.13.",
          "source": {
            "section": "19.12",
            "anchor": "#name-data_blocked-frames",
            "para": "19.12-p1287",
            "sent_id": "19.12-p5814-s1",
            "eid": "ff1fbcf3f9d7e6e9"
          }
        },
        {
          "type": "purpose",
          "text": "19.14.",
          "source": {
            "section": "19.13",
            "anchor": "#name-stream_data_blocked-frames",
            "para": "19.13-p1298",
            "sent_id": "19.13-p5833-s1",
            "eid": "276184cacaadc30c"
          }
        },
        {
          "type": "purpose",
          "text": "19.15.",
          "source": {
            "section": "19.14",
            "anchor": "#name-streams_blocked-frames",
            "para": "19.14-p1308",
            "sent_id": "19.14-p5854-s1",
            "eid": "02adb5fd8711e71f"
          }
        },
        {
          "type": "purpose",
          "text": "19.16.",
          "source": {
            "section": "19.15",
            "anchor": "#name-new_connection_id-frames",
            "para": "19.15-p1327",
            "sent_id": "19.15-p5898-s1",
            "eid": "9a08d9a5ba731949"
          }
        },
        {
          "type": "purpose",
          "text": "19.17.",
          "source": {
            "section": "19.16",
            "anchor": "#name-retire_connection_id-frames",
            "para": "19.16-p1340",
            "sent_id": "19.16-p5926-s1",
            "eid": "2bbfe46e3d7f2615"
          }
        }
      ]
    },
    {
      "section": "2",
      "title": "Streams",
      "anchor": "#name-streams",
      "evidence": [
        {
          "type": "purpose",
          "text": "2.1.",
          "source": {
            "section": "2",
            "anchor": "#name-streams",
            "para": "2-p80",
            "sent_id": "2-p191-s1",
            "eid": "2c351a2721df3672"
          }
        },
        {
          "type": "purpose",
          "text": "Table 1 :",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p86",
            "sent_id": "2.1-p212-s1",
            "eid": "db17a884fc78ebc4"
          }
        },
        {
          "type": "purpose",
          "text": "2.2.",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p89",
            "sent_id": "2.1-p218-s1",
            "eid": "209a0e402cab0ae6"
          }
        },
        {
          "type": "purpose",
          "text": "2.3.",
          "source": {
            "section": "2.2",
            "anchor": "#name-sending-and-receiving-data",
            "para": "2.2-p96",
            "sent_id": "2.2-p240-s1",
            "eid": "2a4711c9b6182f2b"
          }
        },
        {
          "type": "purpose",
          "text": "2.4.",
          "source": {
            "section": "2.3",
            "anchor": "#name-stream-prioritization",
            "para": "2.3-p100",
            "sent_id": "2.3-p249-s1",
            "eid": "a12cfaf7dc718b61"
          }
        },
        {
          "type": "purpose",
          "text": "3.",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p110",
            "sent_id": "2.4-p264-s1",
            "eid": "baf4be69c579030f"
          }
        },
        {
          "type": "purpose",
          "text": "read data; and ¶",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p107",
            "sent_id": "2.4-p261-s1",
            "eid": "6953fc437d625b46"
          }
        },
        {
          "type": "normative",
          "text": "An endpoint that receives a STOP_SENDING frame MUST send a RESET_STREAM frame if the stream is in the \"Ready\" or \"Send\" state.",
          "source": {
            "section": "2.4",
            "anchor": "#name-operations-on-streams",
            "para": "2.4-p110",
            "sent_id": "2.4-p328-s65",
            "eid": "1a698e4d5b5c58fd"
          }
        },
        {
          "type": "normative",
          "text": "A QUIC endpoint MUST NOT reuse a stream ID within a connection. ",
          "source": {
            "section": "2.1",
            "anchor": "#name-stream-types-and-identifier",
            "para": "2.1-p82",
            "sent_id": "2.1-p207-s4",
            "eid": "0a3e79b7581d7156"
          }
        }
      ]
    },
    {
      "section": "20",
      "title": "Error Codes",
      "anchor": "#name-error-codes",
      "evidence": [
        {
          "type": "purpose",
          "text": "20.1.",
          "source": {
            "section": "20",
            "anchor": "#name-error-codes",
            "para": "20-p1389",
            "sent_id": "20-p6067-s1",
            "eid": "a7ea2fe72e57db06"
          }
        },
        {
          "type": "purpose",
          "text": "20.2.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1411",
            "sent_id": "20.1-p6124-s1",
            "eid": "d3edee5a4e1cb8e3"
          }
        },
        {
          "type": "purpose",
          "text": "21.",
          "source": {
            "section": "20.2",
            "anchor": "#name-application-protocol-error-",
            "para": "20.2-p1413",
            "sent_id": "20.2-p6129-s1",
            "eid": "72ea4e567307104f"
          }
        },
        {
          "type": "purpose",
          "text": "The cryptographic handshake failed.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1408",
            "sent_id": "20.1-p6115-s1",
            "eid": "f376d3877194e7f6"
          }
        },
        {
          "type": "purpose",
          "text": "The server refused to accept a new connection. ¶",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1393",
            "sent_id": "20.1-p6099-s1",
            "eid": "aef4108619995378"
          }
        },
        {
          "type": "purpose",
          "text": "See Section 22.5 for details on registering new error codes. ¶",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1409",
            "sent_id": "20.1-p6118-s1",
            "eid": "3c15ff58365d10fb"
          }
        },
        {
          "type": "purpose",
          "text": "In defining these error codes, several principles are applied.",
          "source": {
            "section": "20.1",
            "anchor": "#name-transport-error-codes",
            "para": "20.1-p1410",
            "sent_id": "20.1-p6119-s1",
            "eid": "9ea30f9be7ac24c6"
          }
        }
      ]
    }
  ],
  "frame_evidence": [
    {
      "section": "19",
      "title": "Frame Types and Formats",
      "anchor": "#name-frame-types-and-formats",
      "frames": [
        "DATA_BLOCKED",
        "MAX_DATA",
        "MAX_STREAMS",
        "MAX_STREAM_DATA",
        "RESET_STREAM",
        "STOP_SENDING",
        "STREAM",
        "STREAMS_BLOCKED",
        "STREAM_DATA_BLOCKED"
      ]
    }
  ],
  "cites_pool": [
    {
      "eid": "720f215781e79bdc",
      "section": "19.8",
      "anchor": "#name-stream-frames",
      "para": "19.8-p1232",
      "sent_id": "19.8-p5695-s2"
    },
    {
      "eid": "81baac9031ce4264",
      "section": "19.9",
      "anchor": "#name-max_data-frames",
      "para": "19.9-p1246",
      "sent_id": "19.9-p5723-s2"
    },
    {
      "eid": "f408addcf636faa7",
      "section": "19",
      "anchor": "#name-frame-types-and-formats",
      "para": "19-p1109",
      "sent_id": "19-p5395-s1"
    },
    {
      "eid": "af4b7463b751bc3e",
      "section": "19.1",
      "anchor": "#name-padding-frames",
      "para": "19.1-p1116",
      "sent_id": "19.1-p5412-s1"
    },
    {
      "eid": "0a17e44f8aa704f5",
      "section": "19.2",
      "anchor": "#name-ping-frames",
      "para": "19.2-p1125",
      "sent_id": "19.2-p5425-s1"
    },
    {
      "eid": "d01360fa5fb7194e",
      "section": "19.3.1",
      "anchor": "#name-ack-ranges",
      "para": "19.3.1-p1145",
      "sent_id": "19.3.1-p5512-s2"
    },
    {
      "eid": "c0710ea8039271cd",
      "section": "19.3.2",
      "anchor": "#name-ecn-counts",
      "para": "19.3.2-p1175",
      "sent_id": "19.3.2-p5557-s1"
    },
    {
      "eid": "247207e2d4d98538",
      "section": "19.4",
      "anchor": "#name-reset_stream-frames",
      "para": "19.4-p1188",
      "sent_id": "19.4-p5579-s1"
    },
    {
      "eid": "4c66d2e99129f7a7",
      "section": "19.5",
      "anchor": "#name-stop_sending-frames",
      "para": "19.5-p1199",
      "sent_id": "19.5-p5602-s1"
    },
    {
      "eid": "9dd2d98a33191cfa",
      "section": "19.6",
      "anchor": "#name-crypto-frames",
      "para": "19.6-p1213",
      "sent_id": "19.6-p5635-s1"
    },
    {
      "eid": "34729c7b174611d2",
      "section": "19.7",
      "anchor": "#name-new_token-frames",
      "para": "19.7-p1225",
      "sent_id": "19.7-p5661-s1"
    },
    {
      "eid": "33c1677cbe79c05d",
      "section": "19.8",
      "anchor": "#name-stream-frames",
      "para": "19.8-p1243",
      "sent_id": "19.8-p5713-s1"
    },
    {
      "eid": "592673a212421afc",
      "section": "19.9",
      "anchor": "#name-max_data-frames",
      "para": "19.9-p1253",
      "sent_id": "19.9-p5734-s1"
    },
    {
      "eid": "5c86d707b66dfe32",
      "section": "19.10",
      "anchor": "#name-max_stream_data-frames",
      "para": "19.10-p1266",
      "sent_id": "19.10-p5765-s1"
    },
    {
      "eid": "375ccbdc717d73b2",
      "section": "19.11",
      "anchor": "#name-max_streams-frames",
      "para": "19.11-p1278",
      "sent_id": "19.11-p5798-s1"
    },
    {
      "eid": "ff1fbcf3f9d7e6e9",
      "section": "19.12",
      "anchor": "#name-data_blocked-frames",
      "para": "19.12-p1287",
      "sent_id": "19.12-p5814-s1"
    },
    {
      "eid": "276184cacaadc30c",
      "section": "19.13",
      "anchor": "#name-stream_data_blocked-frames",
      "para": "19.13-p1298",
      "sent_id": "19.13-p5833-s1"
    },
    {
      "eid": "02adb5fd8711e71f",
      "section": "19.14",
      "anchor": "#name-streams_blocked-frames",
      "para": "19.14-p1308",
      "sent_id": "19.14-p5854-s1"
    },
    {
      "eid": "9a08d9a5ba731949",
      "section": "19.15",
      "anchor": "#name-new_connection_id-frames",
      "para": "19.15-p1327",
      "sent_id": "19.15-p5898-s1"
    },
    {
      "eid": "2bbfe46e3d7f2615",
      "section": "19.16",
      "anchor": "#name-retire_connection_id-frames",
      "para": "19.16-p1340",
      "sent_id": "19.16-p5926-s1"
    },
    {
      "eid": "2c351a2721df3672",
      "section": "2",
      "anchor": "#name-streams",
      "para": "2-p80",
      "sent_id": "2-p191-s1"
    },
    {
      "eid": "db17a884fc78ebc4",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p86",
      "sent_id": "2.1-p212-s1"
    },
    {
      "eid": "209a0e402cab0ae6",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p89",
      "sent_id": "2.1-p218-s1"
    },
    {
      "eid": "2a4711c9b6182f2b",
      "section": "2.2",
      "anchor": "#name-sending-and-receiving-data",
      "para": "2.2-p96",
      "sent_id": "2.2-p240-s1"
    },
    {
      "eid": "a12cfaf7dc718b61",
      "section": "2.3",
      "anchor": "#name-stream-prioritization",
      "para": "2.3-p100",
      "sent_id": "2.3-p249-s1"
    },
    {
      "eid": "baf4be69c579030f",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p110",
      "sent_id": "2.4-p264-s1"
    },
    {
      "eid": "6953fc437d625b46",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p107",
      "sent_id": "2.4-p261-s1"
    },
    {
      "eid": "1a698e4d5b5c58fd",
      "section": "2.4",
      "anchor": "#name-operations-on-streams",
      "para": "2.4-p110",
      "sent_id": "2.4-p328-s65"
    },
    {
      "eid": "0a3e79b7581d7156",
      "section": "2.1",
      "anchor": "#name-stream-types-and-identifier",
      "para": "2.1-p82",
      "sent_id": "2.1-p207-s4"
    },
    {
      "eid": "a7ea2fe72e57db06",
      "section": "20",
      "anchor": "#name-error-codes",
      "para": "20-p1389",
      "sent_id": "20-p6067-s1"
    },
    {
      "eid": "d3edee5a4e1cb8e3",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1411",
      "sent_id": "20.1-p6124-s1"
    },
    {
      "eid": "72ea4e567307104f",
      "section": "20.2",
      "anchor": "#name-application-protocol-error-",
      "para": "20.2-p1413",
      "sent_id": "20.2-p6129-s1"
    },
    {
      "eid": "f376d3877194e7f6",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1408",
      "sent_id": "20.1-p6115-s1"
    },
    {
      "eid": "aef4108619995378",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1393",
      "sent_id": "20.1-p6099-s1"
    },
    {
      "eid": "3c15ff58365d10fb",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1409",
      "sent_id": "20.1-p6118-s1"
    },
    {
      "eid": "9ea30f9be7ac24c6",
      "section": "20.1",
      "anchor": "#name-transport-error-codes",
      "para": "20.1-p1410",
      "sent_id": "20.1-p6119-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}
2025-09-25 15:24:01,285 - INFO - subprotocolextractor_eid.py:569 - ====end prompt====
2025-09-25 15:24:08,709 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 15:24:08,745 - INFO - subprotocolextractor_eid.py:579 - [Shard 1] 收到结果 1370 chars
2025-09-25 15:24:08,789 - WARNING - subprotocolextractor_eid.py:543 - [Shard 2] 超预算，启动二次裁剪 evidence…
2025-09-25 15:24:08,879 - INFO - subprotocolextractor_eid.py:558 - [Shard 2] 发送 tokens≈3698
2025-09-25 15:24:08,879 - INFO - subprotocolextractor_eid.py:561 - ====prompt====
2025-09-25 15:24:08,879 - INFO - subprotocolextractor_eid.py:562 - System Prompt:
你是“协议规范编译器”。任务：仅依据提供的 RFC 证据（含章节号与锚点），
把 QUIC (RFC 9000) 的主要子协议划分出来，并给出用途、关键帧、依赖与边界。
铁规：
1) 仅使用输入 evidence；禁止外部知识或猜测。
2) 每条结论必须给 cites（引用 eid，来自 cites_pool）。
3) 允许内部推理，但最终只输出 JSON；不得输出推理过程。
4) 术语统一：client≈initiator，server≈responder，endpoint≈peer；帧名保持全大写。
5) 模态优先级：MUST/SHALL > SHOULD/RECOMMENDED > MAY/OPTIONAL；冲突时偏向强模态。
6) 证据不足时，输出 open_questions[] 指明缺口与应补小节/帧。
7) 严格符合 JSON Schema，勿添加未定义字段。
2025-09-25 15:24:08,880 - INFO - subprotocolextractor_eid.py:563 - ----
2025-09-25 15:24:08,880 - INFO - subprotocolextractor_eid.py:564 - Developer Prompt:
【工作流】
A. 候选模块：从 toc + evidence 导言/目的/规范句中归纳主要子协议（Streams、Flow Control、Connection Management/Migration、Connection-level 传输、Connection Closure 等，前提是有证据）。
B. purpose：用导言/目的句凝练（≤200字符），附 1–3 条 cites。
C. 边界与依赖：boundaries.includes（小节号集合）、excludes（明确不含主题，如 RFC9001/9002）；depends_on（如 Streams 依赖 Flow Control）。
D. key_frames：把与该模块相关的帧名（仅名称）列出；证据可来自 §19.* 的帧定义或正文提及。
E. 覆盖检查：若 frame_evidence 里有帧未被任何模块收录，加入 open_questions。
F. cites 必须是**字符串数组**，且只能取自 cites_pool.eid。禁止使用 section/anchor 文本；禁止自造 eid。
【输出 JSON Schema】
{
  "type":"object",
  "required":["subprotocols","open_questions"],
  "properties":{
    "subprotocols":{"type":"array","items":{
      "type":"object",
      "required":["name","purpose","key_frames","depends_on","boundaries","cites"],
      "properties":{
        "name":{"type":"string"},
        "purpose":{"type":"string","maxLength":200},
        "key_frames":{"type":"array","items":{"type":"string"}},
        "depends_on":{"type":"array","items":{"type":"string"}},
        "boundaries":{"type":"object","properties":{
          "includes":{"type":"array","items":{"type":"string"}},
          "excludes":{"type":"array","items":{"type":"string"}}
        }},
        "cites":{"type":"array","items":{"type":"string"}}
      }
    }},
    "open_questions":{"type":"array","items":{
      "type":"object",
      "required":["ask"],
      "properties":{
        "ask":{"type":"string"},
        "related_frames":{"type":"array","items":{"type":"string"}},
        "wanted_sections":{"type":"array","items":{"type":"string"}}
      }
    }}
  }
}
2025-09-25 15:24:08,881 - INFO - subprotocolextractor_eid.py:565 - ----
2025-09-25 15:24:08,882 - INFO - subprotocolextractor_eid.py:566 - User Prompt:
任务：在 RFC 证据范围内，抽取‘主要子协议/主要部分’用于后续选择建模范围。
只输出符合上方 JSON Schema 的 JSON。每条字段都要给 cites，且 cites 只能是 cites_pool 中的 eid（字符串）。

=== ContextPacket (subprotocols) ===
{
  "toc": [
    {
      "section": "23",
      "title": "References",
      "anchor": "#name-references",
      "order": 204
    },
    {
      "section": "21",
      "title": "Security Considerations",
      "anchor": "#name-security-considerations",
      "order": 163
    },
    {
      "section": "22",
      "title": "IANA Considerations",
      "anchor": "#name-iana-considerations",
      "order": 194
    }
  ],
  "evidence": [
    {
      "section": "21",
      "title": "Security Considerations",
      "anchor": "#name-security-considerations",
      "evidence": [
        {
          "type": "purpose",
          "text": "21.1.",
          "source": {
            "section": "21",
            "anchor": "#name-security-considerations",
            "para": "21-p1415",
            "sent_id": "21-p6292-s1",
            "eid": "99b5c91120f39115"
          }
        },
        {
          "type": "purpose",
          "text": "Note:",
          "source": {
            "section": "21.1.1.1",
            "anchor": "#name-anti-amplification",
            "para": "21.1.1.1-p1429",
            "sent_id": "21.1.1.1-p6383-s1",
            "eid": "6c1fe9467b53aa6b"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.2.",
          "source": {
            "section": "21.1.1.4",
            "anchor": "#name-parameter-negotiation",
            "para": "21.1.1.4-p1439",
            "sent_id": "21.1.1.4-p6410-s1",
            "eid": "6a427c160ea8f91d"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.3.",
          "source": {
            "section": "21.1.2",
            "anchor": "#name-protected-packets-2",
            "para": "21.1.2-p1445",
            "sent_id": "21.1.2-p6425-s1",
            "eid": "227af6a15abd2b6f"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.3.3.",
          "source": {
            "section": "21.1.3.2",
            "anchor": "#name-off-path-active-attacks",
            "para": "21.1.3.2-p1488",
            "sent_id": "21.1.3.2-p6495-s1",
            "eid": "c60f57ae4ff2f743"
          }
        },
        {
          "type": "purpose",
          "text": "21.2.",
          "source": {
            "section": "21.1.3.3",
            "anchor": "#name-limited-on-path-active-atta",
            "para": "21.1.3.3-p1506",
            "sent_id": "21.1.3.3-p6518-s1",
            "eid": "bf3309ef8c6b9d17"
          }
        },
        {
          "type": "purpose",
          "text": "21.3.",
          "source": {
            "section": "21.2",
            "anchor": "#name-handshake-denial-of-service",
            "para": "21.2-p1515",
            "sent_id": "21.2-p6556-s1",
            "eid": "3c252d11d81e4e61"
          }
        },
        {
          "type": "purpose",
          "text": "21.4.",
          "source": {
            "section": "21.3",
            "anchor": "#name-amplification-attack",
            "para": "21.3-p1518",
            "sent_id": "21.3-p6564-s1",
            "eid": "6f7113c5d0bd9b9b"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.",
          "source": {
            "section": "21.4",
            "anchor": "#name-optimistic-ack-attack",
            "para": "21.4-p1520",
            "sent_id": "21.4-p6571-s1",
            "eid": "19f858c6cf4f7ed5"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.1.",
          "source": {
            "section": "21.5",
            "anchor": "#name-request-forgery-attacks",
            "para": "21.5-p1529",
            "sent_id": "21.5-p6645-s1",
            "eid": "7ef453a0b9336c53"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.2.",
          "source": {
            "section": "21.5.1",
            "anchor": "#name-control-options-for-endpoin",
            "para": "21.5.1-p1539",
            "sent_id": "21.5.1-p6672-s1",
            "eid": "5c0f380133776e8a"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.3.",
          "source": {
            "section": "21.5.2",
            "anchor": "#name-request-forgery-with-client",
            "para": "21.5.2-p1546",
            "sent_id": "21.5.2-p6700-s1",
            "eid": "1831a0e6ab9ee6cc"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.4.",
          "source": {
            "section": "21.5.3",
            "anchor": "#name-request-forgery-with-prefer",
            "para": "21.5.3-p1550",
            "sent_id": "21.5.3-p6711-s1",
            "eid": "017b4f2e483de891"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.5.",
          "source": {
            "section": "21.5.4",
            "anchor": "#name-request-forgery-with-spoofe",
            "para": "21.5.4-p1555",
            "sent_id": "21.5.4-p6725-s1",
            "eid": "5fd5d7de534192d1"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.6.",
          "source": {
            "section": "21.5.5",
            "anchor": "#name-request-forgery-with-versio",
            "para": "21.5.5-p1559",
            "sent_id": "21.5.5-p6734-s1",
            "eid": "8a3b83a4d2e2a87c"
          }
        }
      ]
    }
  ],
  "frame_evidence": [],
  "cites_pool": [
    {
      "eid": "99b5c91120f39115",
      "section": "21",
      "anchor": "#name-security-considerations",
      "para": "21-p1415",
      "sent_id": "21-p6292-s1"
    },
    {
      "eid": "6c1fe9467b53aa6b",
      "section": "21.1.1.1",
      "anchor": "#name-anti-amplification",
      "para": "21.1.1.1-p1429",
      "sent_id": "21.1.1.1-p6383-s1"
    },
    {
      "eid": "6a427c160ea8f91d",
      "section": "21.1.1.4",
      "anchor": "#name-parameter-negotiation",
      "para": "21.1.1.4-p1439",
      "sent_id": "21.1.1.4-p6410-s1"
    },
    {
      "eid": "227af6a15abd2b6f",
      "section": "21.1.2",
      "anchor": "#name-protected-packets-2",
      "para": "21.1.2-p1445",
      "sent_id": "21.1.2-p6425-s1"
    },
    {
      "eid": "c60f57ae4ff2f743",
      "section": "21.1.3.2",
      "anchor": "#name-off-path-active-attacks",
      "para": "21.1.3.2-p1488",
      "sent_id": "21.1.3.2-p6495-s1"
    },
    {
      "eid": "bf3309ef8c6b9d17",
      "section": "21.1.3.3",
      "anchor": "#name-limited-on-path-active-atta",
      "para": "21.1.3.3-p1506",
      "sent_id": "21.1.3.3-p6518-s1"
    },
    {
      "eid": "3c252d11d81e4e61",
      "section": "21.2",
      "anchor": "#name-handshake-denial-of-service",
      "para": "21.2-p1515",
      "sent_id": "21.2-p6556-s1"
    },
    {
      "eid": "6f7113c5d0bd9b9b",
      "section": "21.3",
      "anchor": "#name-amplification-attack",
      "para": "21.3-p1518",
      "sent_id": "21.3-p6564-s1"
    },
    {
      "eid": "19f858c6cf4f7ed5",
      "section": "21.4",
      "anchor": "#name-optimistic-ack-attack",
      "para": "21.4-p1520",
      "sent_id": "21.4-p6571-s1"
    },
    {
      "eid": "7ef453a0b9336c53",
      "section": "21.5",
      "anchor": "#name-request-forgery-attacks",
      "para": "21.5-p1529",
      "sent_id": "21.5-p6645-s1"
    },
    {
      "eid": "5c0f380133776e8a",
      "section": "21.5.1",
      "anchor": "#name-control-options-for-endpoin",
      "para": "21.5.1-p1539",
      "sent_id": "21.5.1-p6672-s1"
    },
    {
      "eid": "1831a0e6ab9ee6cc",
      "section": "21.5.2",
      "anchor": "#name-request-forgery-with-client",
      "para": "21.5.2-p1546",
      "sent_id": "21.5.2-p6700-s1"
    },
    {
      "eid": "017b4f2e483de891",
      "section": "21.5.3",
      "anchor": "#name-request-forgery-with-prefer",
      "para": "21.5.3-p1550",
      "sent_id": "21.5.3-p6711-s1"
    },
    {
      "eid": "5fd5d7de534192d1",
      "section": "21.5.4",
      "anchor": "#name-request-forgery-with-spoofe",
      "para": "21.5.4-p1555",
      "sent_id": "21.5.4-p6725-s1"
    },
    {
      "eid": "8a3b83a4d2e2a87c",
      "section": "21.5.5",
      "anchor": "#name-request-forgery-with-versio",
      "para": "21.5.5-p1559",
      "sent_id": "21.5.5-p6734-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}

2025-09-25 15:24:08,885 - INFO - subprotocolextractor_eid.py:567 - ----
2025-09-25 15:24:08,886 - INFO - subprotocolextractor_eid.py:568 - Packet Data:
{
  "toc": [
    {
      "section": "23",
      "title": "References",
      "anchor": "#name-references",
      "order": 204
    },
    {
      "section": "21",
      "title": "Security Considerations",
      "anchor": "#name-security-considerations",
      "order": 163
    },
    {
      "section": "22",
      "title": "IANA Considerations",
      "anchor": "#name-iana-considerations",
      "order": 194
    }
  ],
  "evidence": [
    {
      "section": "21",
      "title": "Security Considerations",
      "anchor": "#name-security-considerations",
      "evidence": [
        {
          "type": "purpose",
          "text": "21.1.",
          "source": {
            "section": "21",
            "anchor": "#name-security-considerations",
            "para": "21-p1415",
            "sent_id": "21-p6292-s1",
            "eid": "99b5c91120f39115"
          }
        },
        {
          "type": "purpose",
          "text": "Note:",
          "source": {
            "section": "21.1.1.1",
            "anchor": "#name-anti-amplification",
            "para": "21.1.1.1-p1429",
            "sent_id": "21.1.1.1-p6383-s1",
            "eid": "6c1fe9467b53aa6b"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.2.",
          "source": {
            "section": "21.1.1.4",
            "anchor": "#name-parameter-negotiation",
            "para": "21.1.1.4-p1439",
            "sent_id": "21.1.1.4-p6410-s1",
            "eid": "6a427c160ea8f91d"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.3.",
          "source": {
            "section": "21.1.2",
            "anchor": "#name-protected-packets-2",
            "para": "21.1.2-p1445",
            "sent_id": "21.1.2-p6425-s1",
            "eid": "227af6a15abd2b6f"
          }
        },
        {
          "type": "purpose",
          "text": "21.1.3.3.",
          "source": {
            "section": "21.1.3.2",
            "anchor": "#name-off-path-active-attacks",
            "para": "21.1.3.2-p1488",
            "sent_id": "21.1.3.2-p6495-s1",
            "eid": "c60f57ae4ff2f743"
          }
        },
        {
          "type": "purpose",
          "text": "21.2.",
          "source": {
            "section": "21.1.3.3",
            "anchor": "#name-limited-on-path-active-atta",
            "para": "21.1.3.3-p1506",
            "sent_id": "21.1.3.3-p6518-s1",
            "eid": "bf3309ef8c6b9d17"
          }
        },
        {
          "type": "purpose",
          "text": "21.3.",
          "source": {
            "section": "21.2",
            "anchor": "#name-handshake-denial-of-service",
            "para": "21.2-p1515",
            "sent_id": "21.2-p6556-s1",
            "eid": "3c252d11d81e4e61"
          }
        },
        {
          "type": "purpose",
          "text": "21.4.",
          "source": {
            "section": "21.3",
            "anchor": "#name-amplification-attack",
            "para": "21.3-p1518",
            "sent_id": "21.3-p6564-s1",
            "eid": "6f7113c5d0bd9b9b"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.",
          "source": {
            "section": "21.4",
            "anchor": "#name-optimistic-ack-attack",
            "para": "21.4-p1520",
            "sent_id": "21.4-p6571-s1",
            "eid": "19f858c6cf4f7ed5"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.1.",
          "source": {
            "section": "21.5",
            "anchor": "#name-request-forgery-attacks",
            "para": "21.5-p1529",
            "sent_id": "21.5-p6645-s1",
            "eid": "7ef453a0b9336c53"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.2.",
          "source": {
            "section": "21.5.1",
            "anchor": "#name-control-options-for-endpoin",
            "para": "21.5.1-p1539",
            "sent_id": "21.5.1-p6672-s1",
            "eid": "5c0f380133776e8a"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.3.",
          "source": {
            "section": "21.5.2",
            "anchor": "#name-request-forgery-with-client",
            "para": "21.5.2-p1546",
            "sent_id": "21.5.2-p6700-s1",
            "eid": "1831a0e6ab9ee6cc"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.4.",
          "source": {
            "section": "21.5.3",
            "anchor": "#name-request-forgery-with-prefer",
            "para": "21.5.3-p1550",
            "sent_id": "21.5.3-p6711-s1",
            "eid": "017b4f2e483de891"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.5.",
          "source": {
            "section": "21.5.4",
            "anchor": "#name-request-forgery-with-spoofe",
            "para": "21.5.4-p1555",
            "sent_id": "21.5.4-p6725-s1",
            "eid": "5fd5d7de534192d1"
          }
        },
        {
          "type": "purpose",
          "text": "21.5.6.",
          "source": {
            "section": "21.5.5",
            "anchor": "#name-request-forgery-with-versio",
            "para": "21.5.5-p1559",
            "sent_id": "21.5.5-p6734-s1",
            "eid": "8a3b83a4d2e2a87c"
          }
        }
      ]
    },
    {
      "section": "22",
      "title": "IANA Considerations",
      "anchor": "#name-iana-considerations",
      "evidence": [
        {
          "type": "purpose",
          "text": "22.1.",
          "source": {
            "section": "22",
            "anchor": "#name-iana-considerations",
            "para": "22-p1600",
            "sent_id": "22-p6926-s1",
            "eid": "4974c79491bee773"
          }
        },
        {
          "type": "purpose",
          "text": "22.1.2.",
          "source": {
            "section": "22.1.1",
            "anchor": "#name-provisional-registrations",
            "para": "22.1.1-p1615",
            "sent_id": "22.1.1-p6991-s1",
            "eid": "b1399e5c4c21f701"
          }
        },
        {
          "type": "purpose",
          "text": "22.1.3.",
          "source": {
            "section": "22.1.2",
            "anchor": "#name-selecting-codepoints",
            "para": "22.1.2-p1620",
            "sent_id": "22.1.2-p7005-s1",
            "eid": "80dd304772e03d04"
          }
        },
        {
          "type": "purpose",
          "text": "22.1.4.",
          "source": {
            "section": "22.1.3",
            "anchor": "#name-reclaiming-provisional-code",
            "para": "22.1.3-p1626",
            "sent_id": "22.1.3-p7024-s1",
            "eid": "20cc09fd0e6a350a"
          }
        },
        {
          "type": "purpose",
          "text": "22.2.",
          "source": {
            "section": "22.1.4",
            "anchor": "#name-permanent-registrations",
            "para": "22.1.4-p1632",
            "sent_id": "22.1.4-p7041-s1",
            "eid": "776664e2a86b0eab"
          }
        },
        {
          "type": "purpose",
          "text": "22.3.",
          "source": {
            "section": "22.2",
            "anchor": "#name-quic-versions-registry",
            "para": "22.2-p1637",
            "sent_id": "22.2-p7053-s1",
            "eid": "a68c69f1658bcf27"
          }
        },
        {
          "type": "purpose",
          "text": "Table 6 :",
          "source": {
            "section": "22.3",
            "anchor": "#name-quic-transport-parameters-r",
            "para": "22.3-p1643",
            "sent_id": "22.3-p7066-s1",
            "eid": "ddcc1e9b4d5317ce"
          }
        },
        {
          "type": "purpose",
          "text": "22.4.",
          "source": {
            "section": "22.3",
            "anchor": "#name-quic-transport-parameters-r",
            "para": "22.3-p1646",
            "sent_id": "22.3-p7071-s1",
            "eid": "cb312bed21ab4942"
          }
        },
        {
          "type": "purpose",
          "text": "22.5.",
          "source": {
            "section": "22.4",
            "anchor": "#name-quic-frame-types-registry",
            "para": "22.4-p1653",
            "sent_id": "22.4-p7090-s1",
            "eid": "641fbfe49e1e5cd6"
          }
        },
        {
          "type": "purpose",
          "text": "Table 7 :",
          "source": {
            "section": "22.5",
            "anchor": "#name-quic-transport-error-codes-",
            "para": "22.5-p1660",
            "sent_id": "22.5-p7105-s1",
            "eid": "be94eb011f0a4c30"
          }
        },
        {
          "type": "purpose",
          "text": "The assigned codepoint. ¶",
          "source": {
            "section": "22.1.1",
            "anchor": "#name-provisional-registrations",
            "para": "22.1.1-p1607",
            "sent_id": "22.1.1-p6982-s1",
            "eid": "3829b016201a2811"
          }
        },
        {
          "type": "purpose",
          "text": "A request to remove a codepoint MUST be reviewed by the designated experts.",
          "source": {
            "section": "22.1.3",
            "anchor": "#name-reclaiming-provisional-code",
            "para": "22.1.3-p1622",
            "sent_id": "22.1.3-p7015-s1",
            "eid": "52edd6b4594579a0"
          }
        },
        {
          "type": "purpose",
          "text": "ns made by Standards Track publications MUST be permanent. ¶",
          "source": {
            "section": "22.1.4",
            "anchor": "#name-permanent-registrations",
            "para": "22.1.4-p1630",
            "sent_id": "22.1.4-p7039-s1",
            "eid": "621a875befbe713b"
          }
        }
      ]
    },
    {
      "section": "23",
      "title": "References",
      "anchor": "#name-references",
      "evidence": [
        {
          "type": "purpose",
          "text": "A.1.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1666",
            "sent_id": "23.2-p7138-s1",
            "eid": "798f6ca429d20e08"
          }
        },
        {
          "type": "purpose",
          "text": "A.2.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1673",
            "sent_id": "23.2-p7151-s1",
            "eid": "d03885badf27a315"
          }
        },
        {
          "type": "purpose",
          "text": "A.3.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1684",
            "sent_id": "23.2-p7168-s1",
            "eid": "af7bcefede172b12"
          }
        },
        {
          "type": "purpose",
          "text": "A.4.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1695",
            "sent_id": "23.2-p7183-s1",
            "eid": "7f81c107a51897f4"
          }
        },
        {
          "type": "purpose",
          "text": "Fastly",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1773",
            "sent_id": "23.2-p7286-s1",
            "eid": "2181c2c6912bf82c"
          }
        },
        {
          "type": "purpose",
          "text": "Mozilla",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1776",
            "sent_id": "23.2-p7289-s1",
            "eid": "da84aa84218a564d"
          }
        },
        {
          "type": "purpose",
          "text": "Appendix A.",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1663",
            "sent_id": "23.2-p7112-s1",
            "eid": "e9c915f9430dbbfc"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 45 :",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1671",
            "sent_id": "23.2-p7148-s1",
            "eid": "1f054f948f7bfb8c"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 46 :",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1681",
            "sent_id": "23.2-p7163-s1",
            "eid": "5b5ea4095d9f687c"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 47 :",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1693",
            "sent_id": "23.2-p7180-s1",
            "eid": "0f7c2beca8a774a7"
          }
        },
        {
          "type": "purpose",
          "text": "Ian Swett ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1729",
            "sent_id": "23.2-p7242-s1",
            "eid": "740e48b4c0c97364"
          }
        },
        {
          "type": "purpose",
          "text": "Tom Jones ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1767",
            "sent_id": "23.2-p7280-s1",
            "eid": "ade603ff9b281a76"
          }
        },
        {
          "type": "purpose",
          "text": "Nick Banks ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1751",
            "sent_id": "23.2-p7264-s1",
            "eid": "5361611569a4a777"
          }
        },
        {
          "type": "purpose",
          "text": "Ted Hardie ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1765",
            "sent_id": "23.2-p7278-s1",
            "eid": "dff2918b5988859a"
          }
        },
        {
          "type": "purpose",
          "text": "Alyssa Wilk ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1709",
            "sent_id": "23.2-p7222-s1",
            "eid": "b760973ab06c1986"
          }
        },
        {
          "type": "purpose",
          "text": "Lars Eggert ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1735",
            "sent_id": "23.2-p7248-s1",
            "eid": "1b54590151284d80"
          }
        },
        {
          "type": "purpose",
          "text": "Martin Duke ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1743",
            "sent_id": "23.2-p7256-s1",
            "eid": "8ff7fbd0a9710cb3"
          }
        },
        {
          "type": "purpose",
          "text": "Mike Bishop ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1745",
            "sent_id": "23.2-p7258-s1",
            "eid": "44a30dd979b3e414"
          }
        },
        {
          "type": "purpose",
          "text": "Nick Harper ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1753",
            "sent_id": "23.2-p7266-s1",
            "eid": "2cdb2a56c3645c06"
          }
        },
        {
          "type": "purpose",
          "text": "Eric Kinnear ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1723",
            "sent_id": "23.2-p7236-s1",
            "eid": "618971d953fb5146"
          }
        },
        {
          "type": "purpose",
          "text": "Lucas Pardue ¶",
          "source": {
            "section": "23.2",
            "anchor": "#name-informative-references",
            "para": "23.2-p1737",
            "sent_id": "23.2-p7250-s1",
            "eid": "a540754914faea49"
          }
        }
      ]
    }
  ],
  "frame_evidence": [],
  "cites_pool": [
    {
      "eid": "99b5c91120f39115",
      "section": "21",
      "anchor": "#name-security-considerations",
      "para": "21-p1415",
      "sent_id": "21-p6292-s1"
    },
    {
      "eid": "6c1fe9467b53aa6b",
      "section": "21.1.1.1",
      "anchor": "#name-anti-amplification",
      "para": "21.1.1.1-p1429",
      "sent_id": "21.1.1.1-p6383-s1"
    },
    {
      "eid": "6a427c160ea8f91d",
      "section": "21.1.1.4",
      "anchor": "#name-parameter-negotiation",
      "para": "21.1.1.4-p1439",
      "sent_id": "21.1.1.4-p6410-s1"
    },
    {
      "eid": "227af6a15abd2b6f",
      "section": "21.1.2",
      "anchor": "#name-protected-packets-2",
      "para": "21.1.2-p1445",
      "sent_id": "21.1.2-p6425-s1"
    },
    {
      "eid": "c60f57ae4ff2f743",
      "section": "21.1.3.2",
      "anchor": "#name-off-path-active-attacks",
      "para": "21.1.3.2-p1488",
      "sent_id": "21.1.3.2-p6495-s1"
    },
    {
      "eid": "bf3309ef8c6b9d17",
      "section": "21.1.3.3",
      "anchor": "#name-limited-on-path-active-atta",
      "para": "21.1.3.3-p1506",
      "sent_id": "21.1.3.3-p6518-s1"
    },
    {
      "eid": "3c252d11d81e4e61",
      "section": "21.2",
      "anchor": "#name-handshake-denial-of-service",
      "para": "21.2-p1515",
      "sent_id": "21.2-p6556-s1"
    },
    {
      "eid": "6f7113c5d0bd9b9b",
      "section": "21.3",
      "anchor": "#name-amplification-attack",
      "para": "21.3-p1518",
      "sent_id": "21.3-p6564-s1"
    },
    {
      "eid": "19f858c6cf4f7ed5",
      "section": "21.4",
      "anchor": "#name-optimistic-ack-attack",
      "para": "21.4-p1520",
      "sent_id": "21.4-p6571-s1"
    },
    {
      "eid": "7ef453a0b9336c53",
      "section": "21.5",
      "anchor": "#name-request-forgery-attacks",
      "para": "21.5-p1529",
      "sent_id": "21.5-p6645-s1"
    },
    {
      "eid": "5c0f380133776e8a",
      "section": "21.5.1",
      "anchor": "#name-control-options-for-endpoin",
      "para": "21.5.1-p1539",
      "sent_id": "21.5.1-p6672-s1"
    },
    {
      "eid": "1831a0e6ab9ee6cc",
      "section": "21.5.2",
      "anchor": "#name-request-forgery-with-client",
      "para": "21.5.2-p1546",
      "sent_id": "21.5.2-p6700-s1"
    },
    {
      "eid": "017b4f2e483de891",
      "section": "21.5.3",
      "anchor": "#name-request-forgery-with-prefer",
      "para": "21.5.3-p1550",
      "sent_id": "21.5.3-p6711-s1"
    },
    {
      "eid": "5fd5d7de534192d1",
      "section": "21.5.4",
      "anchor": "#name-request-forgery-with-spoofe",
      "para": "21.5.4-p1555",
      "sent_id": "21.5.4-p6725-s1"
    },
    {
      "eid": "8a3b83a4d2e2a87c",
      "section": "21.5.5",
      "anchor": "#name-request-forgery-with-versio",
      "para": "21.5.5-p1559",
      "sent_id": "21.5.5-p6734-s1"
    },
    {
      "eid": "4974c79491bee773",
      "section": "22",
      "anchor": "#name-iana-considerations",
      "para": "22-p1600",
      "sent_id": "22-p6926-s1"
    },
    {
      "eid": "b1399e5c4c21f701",
      "section": "22.1.1",
      "anchor": "#name-provisional-registrations",
      "para": "22.1.1-p1615",
      "sent_id": "22.1.1-p6991-s1"
    },
    {
      "eid": "80dd304772e03d04",
      "section": "22.1.2",
      "anchor": "#name-selecting-codepoints",
      "para": "22.1.2-p1620",
      "sent_id": "22.1.2-p7005-s1"
    },
    {
      "eid": "20cc09fd0e6a350a",
      "section": "22.1.3",
      "anchor": "#name-reclaiming-provisional-code",
      "para": "22.1.3-p1626",
      "sent_id": "22.1.3-p7024-s1"
    },
    {
      "eid": "776664e2a86b0eab",
      "section": "22.1.4",
      "anchor": "#name-permanent-registrations",
      "para": "22.1.4-p1632",
      "sent_id": "22.1.4-p7041-s1"
    },
    {
      "eid": "a68c69f1658bcf27",
      "section": "22.2",
      "anchor": "#name-quic-versions-registry",
      "para": "22.2-p1637",
      "sent_id": "22.2-p7053-s1"
    },
    {
      "eid": "ddcc1e9b4d5317ce",
      "section": "22.3",
      "anchor": "#name-quic-transport-parameters-r",
      "para": "22.3-p1643",
      "sent_id": "22.3-p7066-s1"
    },
    {
      "eid": "cb312bed21ab4942",
      "section": "22.3",
      "anchor": "#name-quic-transport-parameters-r",
      "para": "22.3-p1646",
      "sent_id": "22.3-p7071-s1"
    },
    {
      "eid": "641fbfe49e1e5cd6",
      "section": "22.4",
      "anchor": "#name-quic-frame-types-registry",
      "para": "22.4-p1653",
      "sent_id": "22.4-p7090-s1"
    },
    {
      "eid": "be94eb011f0a4c30",
      "section": "22.5",
      "anchor": "#name-quic-transport-error-codes-",
      "para": "22.5-p1660",
      "sent_id": "22.5-p7105-s1"
    },
    {
      "eid": "3829b016201a2811",
      "section": "22.1.1",
      "anchor": "#name-provisional-registrations",
      "para": "22.1.1-p1607",
      "sent_id": "22.1.1-p6982-s1"
    },
    {
      "eid": "52edd6b4594579a0",
      "section": "22.1.3",
      "anchor": "#name-reclaiming-provisional-code",
      "para": "22.1.3-p1622",
      "sent_id": "22.1.3-p7015-s1"
    },
    {
      "eid": "621a875befbe713b",
      "section": "22.1.4",
      "anchor": "#name-permanent-registrations",
      "para": "22.1.4-p1630",
      "sent_id": "22.1.4-p7039-s1"
    },
    {
      "eid": "798f6ca429d20e08",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1666",
      "sent_id": "23.2-p7138-s1"
    },
    {
      "eid": "d03885badf27a315",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1673",
      "sent_id": "23.2-p7151-s1"
    },
    {
      "eid": "af7bcefede172b12",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1684",
      "sent_id": "23.2-p7168-s1"
    },
    {
      "eid": "7f81c107a51897f4",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1695",
      "sent_id": "23.2-p7183-s1"
    },
    {
      "eid": "2181c2c6912bf82c",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1773",
      "sent_id": "23.2-p7286-s1"
    },
    {
      "eid": "da84aa84218a564d",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1776",
      "sent_id": "23.2-p7289-s1"
    },
    {
      "eid": "e9c915f9430dbbfc",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1663",
      "sent_id": "23.2-p7112-s1"
    },
    {
      "eid": "1f054f948f7bfb8c",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1671",
      "sent_id": "23.2-p7148-s1"
    },
    {
      "eid": "5b5ea4095d9f687c",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1681",
      "sent_id": "23.2-p7163-s1"
    },
    {
      "eid": "0f7c2beca8a774a7",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1693",
      "sent_id": "23.2-p7180-s1"
    },
    {
      "eid": "740e48b4c0c97364",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1729",
      "sent_id": "23.2-p7242-s1"
    },
    {
      "eid": "ade603ff9b281a76",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1767",
      "sent_id": "23.2-p7280-s1"
    },
    {
      "eid": "5361611569a4a777",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1751",
      "sent_id": "23.2-p7264-s1"
    },
    {
      "eid": "dff2918b5988859a",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1765",
      "sent_id": "23.2-p7278-s1"
    },
    {
      "eid": "b760973ab06c1986",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1709",
      "sent_id": "23.2-p7222-s1"
    },
    {
      "eid": "1b54590151284d80",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1735",
      "sent_id": "23.2-p7248-s1"
    },
    {
      "eid": "8ff7fbd0a9710cb3",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1743",
      "sent_id": "23.2-p7256-s1"
    },
    {
      "eid": "44a30dd979b3e414",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1745",
      "sent_id": "23.2-p7258-s1"
    },
    {
      "eid": "2cdb2a56c3645c06",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1753",
      "sent_id": "23.2-p7266-s1"
    },
    {
      "eid": "618971d953fb5146",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1723",
      "sent_id": "23.2-p7236-s1"
    },
    {
      "eid": "a540754914faea49",
      "section": "23.2",
      "anchor": "#name-informative-references",
      "para": "23.2-p1737",
      "sent_id": "23.2-p7250-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}
2025-09-25 15:24:08,895 - INFO - subprotocolextractor_eid.py:569 - ====end prompt====
2025-09-25 15:24:10,504 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 15:24:10,506 - INFO - subprotocolextractor_eid.py:579 - [Shard 2] 收到结果 48 chars
2025-09-25 15:24:10,529 - INFO - subprotocolextractor_eid.py:558 - [Shard 3] 发送 tokens≈4623
2025-09-25 15:24:10,529 - INFO - subprotocolextractor_eid.py:561 - ====prompt====
2025-09-25 15:24:10,530 - INFO - subprotocolextractor_eid.py:562 - System Prompt:
你是“协议规范编译器”。任务：仅依据提供的 RFC 证据（含章节号与锚点），
把 QUIC (RFC 9000) 的主要子协议划分出来，并给出用途、关键帧、依赖与边界。
铁规：
1) 仅使用输入 evidence；禁止外部知识或猜测。
2) 每条结论必须给 cites（引用 eid，来自 cites_pool）。
3) 允许内部推理，但最终只输出 JSON；不得输出推理过程。
4) 术语统一：client≈initiator，server≈responder，endpoint≈peer；帧名保持全大写。
5) 模态优先级：MUST/SHALL > SHOULD/RECOMMENDED > MAY/OPTIONAL；冲突时偏向强模态。
6) 证据不足时，输出 open_questions[] 指明缺口与应补小节/帧。
7) 严格符合 JSON Schema，勿添加未定义字段。
2025-09-25 15:24:10,531 - INFO - subprotocolextractor_eid.py:563 - ----
2025-09-25 15:24:10,532 - INFO - subprotocolextractor_eid.py:564 - Developer Prompt:
【工作流】
A. 候选模块：从 toc + evidence 导言/目的/规范句中归纳主要子协议（Streams、Flow Control、Connection Management/Migration、Connection-level 传输、Connection Closure 等，前提是有证据）。
B. purpose：用导言/目的句凝练（≤200字符），附 1–3 条 cites。
C. 边界与依赖：boundaries.includes（小节号集合）、excludes（明确不含主题，如 RFC9001/9002）；depends_on（如 Streams 依赖 Flow Control）。
D. key_frames：把与该模块相关的帧名（仅名称）列出；证据可来自 §19.* 的帧定义或正文提及。
E. 覆盖检查：若 frame_evidence 里有帧未被任何模块收录，加入 open_questions。
F. cites 必须是**字符串数组**，且只能取自 cites_pool.eid。禁止使用 section/anchor 文本；禁止自造 eid。
【输出 JSON Schema】
{
  "type":"object",
  "required":["subprotocols","open_questions"],
  "properties":{
    "subprotocols":{"type":"array","items":{
      "type":"object",
      "required":["name","purpose","key_frames","depends_on","boundaries","cites"],
      "properties":{
        "name":{"type":"string"},
        "purpose":{"type":"string","maxLength":200},
        "key_frames":{"type":"array","items":{"type":"string"}},
        "depends_on":{"type":"array","items":{"type":"string"}},
        "boundaries":{"type":"object","properties":{
          "includes":{"type":"array","items":{"type":"string"}},
          "excludes":{"type":"array","items":{"type":"string"}}
        }},
        "cites":{"type":"array","items":{"type":"string"}}
      }
    }},
    "open_questions":{"type":"array","items":{
      "type":"object",
      "required":["ask"],
      "properties":{
        "ask":{"type":"string"},
        "related_frames":{"type":"array","items":{"type":"string"}},
        "wanted_sections":{"type":"array","items":{"type":"string"}}
      }
    }}
  }
}
2025-09-25 15:24:10,534 - INFO - subprotocolextractor_eid.py:565 - ----
2025-09-25 15:24:10,535 - INFO - subprotocolextractor_eid.py:566 - User Prompt:
任务：在 RFC 证据范围内，抽取‘主要子协议/主要部分’用于后续选择建模范围。
只输出符合上方 JSON Schema 的 JSON。每条字段都要给 cites，且 cites 只能是 cites_pool 中的 eid（字符串）。

=== ContextPacket (subprotocols) ===
{
  "toc": [
    {
      "section": "4",
      "title": "Flow Control",
      "anchor": "#name-flow-control",
      "order": 16
    },
    {
      "section": "3",
      "title": "Stream States",
      "anchor": "#name-stream-states",
      "order": 10
    }
  ],
  "evidence": [
    {
      "section": "3",
      "title": "Stream States",
      "anchor": "#name-stream-states",
      "evidence": [
        {
          "type": "purpose",
          "text": "3.1.",
          "source": {
            "section": "3",
            "anchor": "#name-stream-states",
            "para": "3-p115",
            "sent_id": "3-p347-s1",
            "eid": "6bae11acc0b882c6"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 2 :",
          "source": {
            "section": "3.1",
            "anchor": "#name-sending-stream-states",
            "para": "3.1-p120",
            "sent_id": "3.1-p366-s1",
            "eid": "43c84775ccedf2b2"
          }
        },
        {
          "type": "purpose",
          "text": "3.2.",
          "source": {
            "section": "3.1",
            "anchor": "#name-sending-stream-states",
            "para": "3.1-p130",
            "sent_id": "3.1-p388-s1",
            "eid": "5a7eb6251d854a32"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 3 :",
          "source": {
            "section": "3.2",
            "anchor": "#name-receiving-stream-states",
            "para": "3.2-p135",
            "sent_id": "3.2-p421-s1",
            "eid": "ae32c8276a2c136c"
          }
        },
        {
          "type": "purpose",
          "text": "3.3.",
          "source": {
            "section": "3.2",
            "anchor": "#name-receiving-stream-states",
            "para": "3.2-p148",
            "sent_id": "3.2-p454-s1",
            "eid": "91a0ac40ccb91384"
          }
        },
        {
          "type": "purpose",
          "text": "3.4.",
          "source": {
            "section": "3.3",
            "anchor": "#name-permitted-frame-types",
            "para": "3.3-p153",
            "sent_id": "3.3-p472-s1",
            "eid": "7956af9d7341b585"
          }
        },
        {
          "type": "purpose",
          "text": "Table 2 :",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p156",
            "sent_id": "3.4-p486-s1",
            "eid": "1ae68e10297be94a"
          }
        },
        {
          "type": "purpose",
          "text": "Note (*1):",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p158",
            "sent_id": "3.4-p490-s1",
            "eid": "f6b8d7ed6d1cb915"
          }
        },
        {
          "type": "purpose",
          "text": "3.5.",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p159",
            "sent_id": "3.4-p492-s1",
            "eid": "db56e224fad13fdb"
          }
        },
        {
          "type": "purpose",
          "text": "4.",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p168",
            "sent_id": "3.5-p516-s1",
            "eid": "10ff7016a716dc06"
          }
        },
        {
          "type": "purpose",
          "text": "STOP_SENDING SHOULD only be sent for a stream that has not ",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p165",
            "sent_id": "3.5-p511-s1",
            "eid": "dba2a58ed6a55832"
          }
        },
        {
          "type": "purpose",
          "text": "The receiver only sends MAX_STREAM_DATA frames in the \"Recv\" state.",
          "source": {
            "section": "3.3",
            "anchor": "#name-permitted-frame-types",
            "para": "3.3-p152",
            "sent_id": "3.3-p468-s1",
            "eid": "2c606f3e6f87c68b"
          }
        },
        {
          "type": "normative",
          "text": "STOP_SENDING is most useful for streams in the \"Recv",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p165",
            "sent_id": "3.5-p512-s2",
            "eid": "30afaaf936b9bd90"
          }
        }
      ]
    },
    {
      "section": "4",
      "title": "Flow Control",
      "anchor": "#name-flow-control",
      "evidence": [
        {
          "type": "purpose",
          "text": "4.1.",
          "source": {
            "section": "4",
            "anchor": "#name-flow-control",
            "para": "4-p172",
            "sent_id": "4-p573-s1",
            "eid": "959a25ce33d23ed1"
          }
        },
        {
          "type": "purpose",
          "text": "4.2.",
          "source": {
            "section": "4.1",
            "anchor": "#name-data-flow-control",
            "para": "4.1-p184",
            "sent_id": "4.1-p604-s1",
            "eid": "e46210c826b1829e"
          }
        },
        {
          "type": "purpose",
          "text": "4.3.",
          "source": {
            "section": "4.2",
            "anchor": "#name-increasing-flow-control-lim",
            "para": "4.2-p191",
            "sent_id": "4.2-p624-s1",
            "eid": "3a8087e388731524"
          }
        },
        {
          "type": "purpose",
          "text": "4.4.",
          "source": {
            "section": "4.3",
            "anchor": "#name-flow-control-performance",
            "para": "4.3-p195",
            "sent_id": "4.3-p633-s1",
            "eid": "cbf79eed9dc9a87c"
          }
        },
        {
          "type": "purpose",
          "text": "4.5.",
          "source": {
            "section": "4.4",
            "anchor": "#name-handling-stream-cancellatio",
            "para": "4.4-p199",
            "sent_id": "4.4-p642-s1",
            "eid": "30ef08461bed847d"
          }
        },
        {
          "type": "purpose",
          "text": "4.6.",
          "source": {
            "section": "4.5",
            "anchor": "#name-stream-final-size",
            "para": "4.5-p205",
            "sent_id": "4.5-p667-s1",
            "eid": "07d05bce9310af27"
          }
        },
        {
          "type": "purpose",
          "text": "5.",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p212",
            "sent_id": "4.6-p695-s1",
            "eid": "c48f6c72b570b511"
          }
        },
        {
          "type": "normative",
          "text": "MAX_STREAMS frames that do not increase the stream limit MUST be ignored. ¶",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p209",
            "sent_id": "4.6-p689-s2",
            "eid": "9905558953016e2d"
          }
        },
        {
          "type": "purpose",
          "text": "Endpoints MUST NOT exceed the limit set by their peer.",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p208",
            "sent_id": "4.6-p686-s1",
            "eid": "b139f149ba17bcb6"
          }
        },
        {
          "type": "purpose",
          "text": "Senders MUST NOT send data in excess of either limit. ¶",
          "source": {
            "section": "4.1",
            "anchor": "#name-data-flow-control",
            "para": "4.1-p176",
            "sent_id": "4.1-p588-s1",
            "eid": "3cd1c90a531aabb0"
          }
        }
      ]
    }
  ],
  "frame_evidence": [],
  "cites_pool": [
    {
      "eid": "6bae11acc0b882c6",
      "section": "3",
      "anchor": "#name-stream-states",
      "para": "3-p115",
      "sent_id": "3-p347-s1"
    },
    {
      "eid": "43c84775ccedf2b2",
      "section": "3.1",
      "anchor": "#name-sending-stream-states",
      "para": "3.1-p120",
      "sent_id": "3.1-p366-s1"
    },
    {
      "eid": "5a7eb6251d854a32",
      "section": "3.1",
      "anchor": "#name-sending-stream-states",
      "para": "3.1-p130",
      "sent_id": "3.1-p388-s1"
    },
    {
      "eid": "ae32c8276a2c136c",
      "section": "3.2",
      "anchor": "#name-receiving-stream-states",
      "para": "3.2-p135",
      "sent_id": "3.2-p421-s1"
    },
    {
      "eid": "91a0ac40ccb91384",
      "section": "3.2",
      "anchor": "#name-receiving-stream-states",
      "para": "3.2-p148",
      "sent_id": "3.2-p454-s1"
    },
    {
      "eid": "7956af9d7341b585",
      "section": "3.3",
      "anchor": "#name-permitted-frame-types",
      "para": "3.3-p153",
      "sent_id": "3.3-p472-s1"
    },
    {
      "eid": "1ae68e10297be94a",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p156",
      "sent_id": "3.4-p486-s1"
    },
    {
      "eid": "f6b8d7ed6d1cb915",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p158",
      "sent_id": "3.4-p490-s1"
    },
    {
      "eid": "db56e224fad13fdb",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p159",
      "sent_id": "3.4-p492-s1"
    },
    {
      "eid": "10ff7016a716dc06",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p168",
      "sent_id": "3.5-p516-s1"
    },
    {
      "eid": "dba2a58ed6a55832",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p165",
      "sent_id": "3.5-p511-s1"
    },
    {
      "eid": "2c606f3e6f87c68b",
      "section": "3.3",
      "anchor": "#name-permitted-frame-types",
      "para": "3.3-p152",
      "sent_id": "3.3-p468-s1"
    },
    {
      "eid": "30afaaf936b9bd90",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p165",
      "sent_id": "3.5-p512-s2"
    },
    {
      "eid": "959a25ce33d23ed1",
      "section": "4",
      "anchor": "#name-flow-control",
      "para": "4-p172",
      "sent_id": "4-p573-s1"
    },
    {
      "eid": "e46210c826b1829e",
      "section": "4.1",
      "anchor": "#name-data-flow-control",
      "para": "4.1-p184",
      "sent_id": "4.1-p604-s1"
    },
    {
      "eid": "3a8087e388731524",
      "section": "4.2",
      "anchor": "#name-increasing-flow-control-lim",
      "para": "4.2-p191",
      "sent_id": "4.2-p624-s1"
    },
    {
      "eid": "cbf79eed9dc9a87c",
      "section": "4.3",
      "anchor": "#name-flow-control-performance",
      "para": "4.3-p195",
      "sent_id": "4.3-p633-s1"
    },
    {
      "eid": "30ef08461bed847d",
      "section": "4.4",
      "anchor": "#name-handling-stream-cancellatio",
      "para": "4.4-p199",
      "sent_id": "4.4-p642-s1"
    },
    {
      "eid": "07d05bce9310af27",
      "section": "4.5",
      "anchor": "#name-stream-final-size",
      "para": "4.5-p205",
      "sent_id": "4.5-p667-s1"
    },
    {
      "eid": "c48f6c72b570b511",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p212",
      "sent_id": "4.6-p695-s1"
    },
    {
      "eid": "9905558953016e2d",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p209",
      "sent_id": "4.6-p689-s2"
    },
    {
      "eid": "b139f149ba17bcb6",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p208",
      "sent_id": "4.6-p686-s1"
    },
    {
      "eid": "3cd1c90a531aabb0",
      "section": "4.1",
      "anchor": "#name-data-flow-control",
      "para": "4.1-p176",
      "sent_id": "4.1-p588-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}

2025-09-25 15:24:10,549 - INFO - subprotocolextractor_eid.py:567 - ----
2025-09-25 15:24:10,550 - INFO - subprotocolextractor_eid.py:568 - Packet Data:
{
  "toc": [
    {
      "section": "4",
      "title": "Flow Control",
      "anchor": "#name-flow-control",
      "order": 16
    },
    {
      "section": "3",
      "title": "Stream States",
      "anchor": "#name-stream-states",
      "order": 10
    }
  ],
  "evidence": [
    {
      "section": "3",
      "title": "Stream States",
      "anchor": "#name-stream-states",
      "evidence": [
        {
          "type": "purpose",
          "text": "3.1.",
          "source": {
            "section": "3",
            "anchor": "#name-stream-states",
            "para": "3-p115",
            "sent_id": "3-p347-s1",
            "eid": "6bae11acc0b882c6"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 2 :",
          "source": {
            "section": "3.1",
            "anchor": "#name-sending-stream-states",
            "para": "3.1-p120",
            "sent_id": "3.1-p366-s1",
            "eid": "43c84775ccedf2b2"
          }
        },
        {
          "type": "purpose",
          "text": "3.2.",
          "source": {
            "section": "3.1",
            "anchor": "#name-sending-stream-states",
            "para": "3.1-p130",
            "sent_id": "3.1-p388-s1",
            "eid": "5a7eb6251d854a32"
          }
        },
        {
          "type": "purpose",
          "text": "Figure 3 :",
          "source": {
            "section": "3.2",
            "anchor": "#name-receiving-stream-states",
            "para": "3.2-p135",
            "sent_id": "3.2-p421-s1",
            "eid": "ae32c8276a2c136c"
          }
        },
        {
          "type": "purpose",
          "text": "3.3.",
          "source": {
            "section": "3.2",
            "anchor": "#name-receiving-stream-states",
            "para": "3.2-p148",
            "sent_id": "3.2-p454-s1",
            "eid": "91a0ac40ccb91384"
          }
        },
        {
          "type": "purpose",
          "text": "3.4.",
          "source": {
            "section": "3.3",
            "anchor": "#name-permitted-frame-types",
            "para": "3.3-p153",
            "sent_id": "3.3-p472-s1",
            "eid": "7956af9d7341b585"
          }
        },
        {
          "type": "purpose",
          "text": "Table 2 :",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p156",
            "sent_id": "3.4-p486-s1",
            "eid": "1ae68e10297be94a"
          }
        },
        {
          "type": "purpose",
          "text": "Note (*1):",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p158",
            "sent_id": "3.4-p490-s1",
            "eid": "f6b8d7ed6d1cb915"
          }
        },
        {
          "type": "purpose",
          "text": "3.5.",
          "source": {
            "section": "3.4",
            "anchor": "#name-bidirectional-stream-states",
            "para": "3.4-p159",
            "sent_id": "3.4-p492-s1",
            "eid": "db56e224fad13fdb"
          }
        },
        {
          "type": "purpose",
          "text": "4.",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p168",
            "sent_id": "3.5-p516-s1",
            "eid": "10ff7016a716dc06"
          }
        },
        {
          "type": "purpose",
          "text": "STOP_SENDING SHOULD only be sent for a stream that has not ",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p165",
            "sent_id": "3.5-p511-s1",
            "eid": "dba2a58ed6a55832"
          }
        },
        {
          "type": "purpose",
          "text": "The receiver only sends MAX_STREAM_DATA frames in the \"Recv\" state.",
          "source": {
            "section": "3.3",
            "anchor": "#name-permitted-frame-types",
            "para": "3.3-p152",
            "sent_id": "3.3-p468-s1",
            "eid": "2c606f3e6f87c68b"
          }
        },
        {
          "type": "normative",
          "text": "STOP_SENDING is most useful for streams in the \"Recv",
          "source": {
            "section": "3.5",
            "anchor": "#name-solicited-state-transitions",
            "para": "3.5-p165",
            "sent_id": "3.5-p512-s2",
            "eid": "30afaaf936b9bd90"
          }
        }
      ]
    },
    {
      "section": "4",
      "title": "Flow Control",
      "anchor": "#name-flow-control",
      "evidence": [
        {
          "type": "purpose",
          "text": "4.1.",
          "source": {
            "section": "4",
            "anchor": "#name-flow-control",
            "para": "4-p172",
            "sent_id": "4-p573-s1",
            "eid": "959a25ce33d23ed1"
          }
        },
        {
          "type": "purpose",
          "text": "4.2.",
          "source": {
            "section": "4.1",
            "anchor": "#name-data-flow-control",
            "para": "4.1-p184",
            "sent_id": "4.1-p604-s1",
            "eid": "e46210c826b1829e"
          }
        },
        {
          "type": "purpose",
          "text": "4.3.",
          "source": {
            "section": "4.2",
            "anchor": "#name-increasing-flow-control-lim",
            "para": "4.2-p191",
            "sent_id": "4.2-p624-s1",
            "eid": "3a8087e388731524"
          }
        },
        {
          "type": "purpose",
          "text": "4.4.",
          "source": {
            "section": "4.3",
            "anchor": "#name-flow-control-performance",
            "para": "4.3-p195",
            "sent_id": "4.3-p633-s1",
            "eid": "cbf79eed9dc9a87c"
          }
        },
        {
          "type": "purpose",
          "text": "4.5.",
          "source": {
            "section": "4.4",
            "anchor": "#name-handling-stream-cancellatio",
            "para": "4.4-p199",
            "sent_id": "4.4-p642-s1",
            "eid": "30ef08461bed847d"
          }
        },
        {
          "type": "purpose",
          "text": "4.6.",
          "source": {
            "section": "4.5",
            "anchor": "#name-stream-final-size",
            "para": "4.5-p205",
            "sent_id": "4.5-p667-s1",
            "eid": "07d05bce9310af27"
          }
        },
        {
          "type": "purpose",
          "text": "5.",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p212",
            "sent_id": "4.6-p695-s1",
            "eid": "c48f6c72b570b511"
          }
        },
        {
          "type": "normative",
          "text": "MAX_STREAMS frames that do not increase the stream limit MUST be ignored. ¶",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p209",
            "sent_id": "4.6-p689-s2",
            "eid": "9905558953016e2d"
          }
        },
        {
          "type": "purpose",
          "text": "Endpoints MUST NOT exceed the limit set by their peer.",
          "source": {
            "section": "4.6",
            "anchor": "#name-controlling-concurrency",
            "para": "4.6-p208",
            "sent_id": "4.6-p686-s1",
            "eid": "b139f149ba17bcb6"
          }
        },
        {
          "type": "purpose",
          "text": "Senders MUST NOT send data in excess of either limit. ¶",
          "source": {
            "section": "4.1",
            "anchor": "#name-data-flow-control",
            "para": "4.1-p176",
            "sent_id": "4.1-p588-s1",
            "eid": "3cd1c90a531aabb0"
          }
        }
      ]
    }
  ],
  "frame_evidence": [],
  "cites_pool": [
    {
      "eid": "6bae11acc0b882c6",
      "section": "3",
      "anchor": "#name-stream-states",
      "para": "3-p115",
      "sent_id": "3-p347-s1"
    },
    {
      "eid": "43c84775ccedf2b2",
      "section": "3.1",
      "anchor": "#name-sending-stream-states",
      "para": "3.1-p120",
      "sent_id": "3.1-p366-s1"
    },
    {
      "eid": "5a7eb6251d854a32",
      "section": "3.1",
      "anchor": "#name-sending-stream-states",
      "para": "3.1-p130",
      "sent_id": "3.1-p388-s1"
    },
    {
      "eid": "ae32c8276a2c136c",
      "section": "3.2",
      "anchor": "#name-receiving-stream-states",
      "para": "3.2-p135",
      "sent_id": "3.2-p421-s1"
    },
    {
      "eid": "91a0ac40ccb91384",
      "section": "3.2",
      "anchor": "#name-receiving-stream-states",
      "para": "3.2-p148",
      "sent_id": "3.2-p454-s1"
    },
    {
      "eid": "7956af9d7341b585",
      "section": "3.3",
      "anchor": "#name-permitted-frame-types",
      "para": "3.3-p153",
      "sent_id": "3.3-p472-s1"
    },
    {
      "eid": "1ae68e10297be94a",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p156",
      "sent_id": "3.4-p486-s1"
    },
    {
      "eid": "f6b8d7ed6d1cb915",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p158",
      "sent_id": "3.4-p490-s1"
    },
    {
      "eid": "db56e224fad13fdb",
      "section": "3.4",
      "anchor": "#name-bidirectional-stream-states",
      "para": "3.4-p159",
      "sent_id": "3.4-p492-s1"
    },
    {
      "eid": "10ff7016a716dc06",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p168",
      "sent_id": "3.5-p516-s1"
    },
    {
      "eid": "dba2a58ed6a55832",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p165",
      "sent_id": "3.5-p511-s1"
    },
    {
      "eid": "2c606f3e6f87c68b",
      "section": "3.3",
      "anchor": "#name-permitted-frame-types",
      "para": "3.3-p152",
      "sent_id": "3.3-p468-s1"
    },
    {
      "eid": "30afaaf936b9bd90",
      "section": "3.5",
      "anchor": "#name-solicited-state-transitions",
      "para": "3.5-p165",
      "sent_id": "3.5-p512-s2"
    },
    {
      "eid": "959a25ce33d23ed1",
      "section": "4",
      "anchor": "#name-flow-control",
      "para": "4-p172",
      "sent_id": "4-p573-s1"
    },
    {
      "eid": "e46210c826b1829e",
      "section": "4.1",
      "anchor": "#name-data-flow-control",
      "para": "4.1-p184",
      "sent_id": "4.1-p604-s1"
    },
    {
      "eid": "3a8087e388731524",
      "section": "4.2",
      "anchor": "#name-increasing-flow-control-lim",
      "para": "4.2-p191",
      "sent_id": "4.2-p624-s1"
    },
    {
      "eid": "cbf79eed9dc9a87c",
      "section": "4.3",
      "anchor": "#name-flow-control-performance",
      "para": "4.3-p195",
      "sent_id": "4.3-p633-s1"
    },
    {
      "eid": "30ef08461bed847d",
      "section": "4.4",
      "anchor": "#name-handling-stream-cancellatio",
      "para": "4.4-p199",
      "sent_id": "4.4-p642-s1"
    },
    {
      "eid": "07d05bce9310af27",
      "section": "4.5",
      "anchor": "#name-stream-final-size",
      "para": "4.5-p205",
      "sent_id": "4.5-p667-s1"
    },
    {
      "eid": "c48f6c72b570b511",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p212",
      "sent_id": "4.6-p695-s1"
    },
    {
      "eid": "9905558953016e2d",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p209",
      "sent_id": "4.6-p689-s2"
    },
    {
      "eid": "b139f149ba17bcb6",
      "section": "4.6",
      "anchor": "#name-controlling-concurrency",
      "para": "4.6-p208",
      "sent_id": "4.6-p686-s1"
    },
    {
      "eid": "3cd1c90a531aabb0",
      "section": "4.1",
      "anchor": "#name-data-flow-control",
      "para": "4.1-p176",
      "sent_id": "4.1-p588-s1"
    }
  ],
  "source_meta": {
    "rfc_html_url": "",
    "html_sha256": "",
    "parser_version": "v1",
    "sentences_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sentences.jsonl",
    "sections_path": "d:/ProtocolAutoModel-main/data/rfc_9000_eid_corpus/sections.jsonl"
  },
  "scope_hint": "RFC9000 §2/§3/§4/§19.*（导言/目的/规范句；流相关帧索引）"
}
2025-09-25 15:24:10,564 - INFO - subprotocolextractor_eid.py:569 - ====end prompt====
2025-09-25 15:24:15,316 - INFO - _client.py:1025 - HTTP Request: POST https://api.gpt.ge/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-25 15:24:15,319 - INFO - subprotocolextractor_eid.py:579 - [Shard 3] 收到结果 956 chars
2025-09-25 15:24:15,439 - INFO - subprotocolextractor_eid.py:600 - 已保存：D:\ProtocolAutoModel-main\output\agents\subprotocol\QUIC_subprotocols_gpt-4o_make_eid.json
